!function(e){function t(t){for(var r,o,s=t[0],c=t[1],u=t[2],p=0,d=[];p<s.length;p++)o=s[p],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(l&&l(t);d.length;)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={1:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="./";var s=this["webpackJsonp@cubejs-client/playground"]=this["webpackJsonp@cubejs-client/playground"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;i.push([981,0,2]),n()}({1147:function(e,t){},135:function(e,t,n){"use strict";n(995),n(1002),n(1003),n(1004),n(511),n(1007),n(1008),n(1010),n(1011),n(1016),n(1018),n(1019),n(1021),n(1023),n(679),n(1030),n(1031),n(1034),n(1035),n(1036),n(1038),n(1040),n(1041),Object.defineProperty(t,"__esModule",{value:!0});var r=n(1046);n(687);var a=n(1047),i=n(1048),o=n(688),s=n(1049),c=n(1050),u=n(1051),l=n(1054),p=n(1056),d=n(1060),m=n(2288),f=n(691),h=n(1064),y=n(1065);n(1066);var b=n(1067),g=n(1068),v=n(692),j=n(1070);function x(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var S=x(r),k=x(a),E=x(i),O=x(o),C=x(s),_=x(c),w=x(u),P=x(l),D=x(p),T=x(d),M=x(f),A=x(h),R=x(y),q=x(b),L=x(g),B=x(v),I=x(j);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){E.default(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F=A.default.extendMoment(M.default),G={day:function(e){return Array.from(e.by("day")).map((function(e){return e.format("YYYY-MM-DDT00:00:00.000")}))},month:function(e){return Array.from(e.snapTo("month").by("month")).map((function(e){return e.format("YYYY-MM-01T00:00:00.000")}))},year:function(e){return Array.from(e.snapTo("year").by("year")).map((function(e){return e.format("YYYY-01-01T00:00:00.000")}))},hour:function(e){return Array.from(e.by("hour")).map((function(e){return e.format("YYYY-MM-DDTHH:00:00.000")}))},minute:function(e){return Array.from(e.by("minute")).map((function(e){return e.format("YYYY-MM-DDTHH:mm:00.000")}))},second:function(e){return Array.from(e.by("second")).map((function(e){return e.format("YYYY-MM-DDTHH:mm:ss.000")}))},week:function(e){return Array.from(e.snapTo("isoweek").by("week")).map((function(e){return e.startOf("isoweek").format("YYYY-MM-DDT00:00:00.000")}))}},z=/^\d\d\d\d-\d\d-\d\d$/,V=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z?$/,U=function(e){var t=new Map;return function(n){return n.forEach((function(n){var r=e(n);t.has(r)||t.set(r,[]),t.get(r).push(n)})),Array.from(t.entries())}},Y={REGULAR_QUERY:"regularQuery",COMPARE_DATE_RANGE_QUERY:"compareDateRangeQuery",BLENDING_QUERY:"blendingQuery"},K=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(C.default(this,e),this.loadResponse=t,null!=this.loadResponse.queryType?(this.queryType=t.queryType,this.loadResponses=t.results):(this.queryType=Y.REGULAR_QUERY,this.loadResponse.pivotQuery=Q(Q({},t.query),{},{queryType:this.queryType}),this.loadResponses=[t]),!Object.values(Y).includes(this.queryType))throw new Error("Unknown query type");this.parseDateMeasures=n.parseDateMeasures,this.options=n,this.backwardCompatibleData=[]}return _.default(e,null,[{key:"measureFromAxis",value:function(e){return e[e.length-1]}},{key:"timeDimensionMember",value:function(e){return"".concat(e.dimension,".").concat(e.granularity)}},{key:"deserialize",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new e(t.loadResponse,n)}}]),_.default(e,[{key:"drillDown",value:function(e,t){if(this.queryType===Y.COMPARE_DATE_RANGE_QUERY)throw new Error("compareDateRange drillDown query is not currently supported");if(this.queryType===Y.BLENDING_QUERY)throw new Error("Data blending drillDown query is not currently supported");var n=e.xValues,r=void 0===n?[]:n,a=e.yValues,i=void 0===a?[]:a,o=this.normalizePivotConfig(t),s=[];o.x.forEach((function(e,t){return s.push([e,r[t]])})),o.y.forEach((function(e,t){return s.push([e,i[t]])}));var c=this.query(),u=c.filters,l=void 0===u?[]:u,p=c.segments,d=void 0===p?[]:p,m=this.loadResponses[0].annotation.measures,f=s.find((function(e){return"measures"===T.default(e,1)[0]}))||[],h=T.default(f,2)[1];if(void 0===h){var y=Object.keys(m);h=T.default(y,1)[0]}if(!(m[h]&&m[h].drillMembers||[]).length)return null;var b=[{member:h,operator:"measureFilter"}].concat(D.default(l)),g=[];return s.filter((function(e){return"measures"!==T.default(e,1)[0]})).forEach((function(e){var t=T.default(e,2),n=t[0],r=t[1],a=n.split("."),i=T.default(a,3),o=i[0],s=i[1],c=i[2];if(void 0!==c){var u=F.range(r,r).snapTo(c);g.push({dimension:[o,s].join("."),dateRange:[u.start,u.end].map((function(e){return e.format(F.HTML5_FMT.DATETIME_LOCAL_MS)}))})}else null==r?b.push({member:n,operator:"notSet"}):b.push({member:n,operator:"equals",values:[r.toString()]})})),Q(Q(Q({},m[h].drillMembersGrouped),{},{filters:b},d.length>0?{segments:d}:{}),{},{timeDimensions:g,timezone:this.loadResponses[0].query.timezone})}},{key:"series",value:function(e){var t=this;return this.seriesNames(e).map((function(n){var r=n.title,a=n.key;return{title:r,key:a,series:t.chartPivot(e).map((function(e){var t=e.category,n=e.x;return{value:P.default(e,["category","x"])[a],category:t,x:n}}))}}))}},{key:"axisValues",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.loadResponses[t].query;return function(t){var r=function(n){return e.filter((function(e){return"measures"!==e})).map((function(e){return null!=t[e]?t[e]:null})).concat(n?[n]:[])};return e.find((function(e){return"measures"===e}))&&(n.measures||[]).length?n.measures.map(r):[r()]}}},{key:"axisValuesString",value:function(e,t){return e.map((function(e){return null==e?"âˆ…":""===e?"[Empty string]":e})).join(t||", ")}},{key:"normalizePivotConfig",value:function(t){return e.getNormalizedPivotConfig(this.loadResponse.pivotQuery,t)}},{key:"timeSeries",value:function(t){if(!t.granularity)return null;var n=t.dateRange;if(!n){var r=m.pipe(m.map((function(n){return n[e.timeDimensionMember(t)]&&F(n[e.timeDimensionMember(t)])})),m.filter((function(e){return!!e})))(this.timeDimensionBackwardCompatibleData());n=r.length&&[m.reduce(m.minBy((function(e){return e.toDate()})),r[0],r),m.reduce(m.maxBy((function(e){return e.toDate()})),r[0],r)]||null}if(!n)return null;var a=t.dateRange?t.dateRange.find((function(e){return e.match(z)})):!["hour","minute","second"].includes(t.granularity),i=n,o=T.default(i,2),s=o[0],c=o[1],u=F.range(s,c);if(!G[t.granularity])throw new Error("Unsupported time granularity: ".concat(t.granularity));return G[t.granularity](a?u.snapTo("day"):u)}},{key:"pivot",value:function(t){var n=this;t=this.normalizePivotConfig(t);var r=this.loadResponse.pivotQuery,a=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=U((function(e){var t=e.xValues;return n.axisValuesString(t)})),o=function(e,t){return e[t]};if(t.fillMissingDates&&1===t.x.length&&m.equals(t.x,(r.timeDimensions||[]).filter((function(e){return!!e.granularity})).map((function(t){return e.timeDimensionMember(t)})))){var s=n.loadResponses.map((function(e){return n.timeSeries(e.query.timeDimensions[0])}));s[0]&&(i=function(e){var t=m.groupBy((function(e){var t=e.xValues;return F(t[0]).format(F.HTML5_FMT.DATETIME_LOCAL_MS)}),e);return s[a].map((function(e){return[e,t[e]||[{xValues:[e],row:{}}]]}))},o=function(e,t){return e[t]||0})}var c=m.pipe(m.map((function(e){return n.axisValues(t.x,a)(e).map((function(t){return{xValues:t,row:e}}))})),m.unnest,i)(n.timeDimensionBackwardCompatibleData(a)),u=m.pipe(m.map((function(e){var r=T.default(e,2)[1];return m.unnest(r.filter((function(e){var t=e.row;return Object.keys(t).length>0})).map((function(e){var r=e.row;return n.axisValues(t.y,a)(r)})))})),m.unnest,m.uniq)(c);return c.map((function(r){var i=T.default(r,2)[1],s=i[0].xValues,c=m.pipe(m.map((function(e){var r=e.row;return n.axisValues(t.y,a)(r).map((function(e){return{yValues:e,row:r}}))})),m.unnest,m.groupBy((function(e){var t=e.yValues;return n.axisValuesString(t)})))(i);return{xValues:s,yValuesArray:m.unnest(u.map((function(r){var a=t.x.find((function(e){return"measures"===e}))?e.measureFromAxis(s):e.measureFromAxis(r);return(c[n.axisValuesString(r)]||[{row:{}}]).map((function(e){var t=e.row;return[r,o(t,a)]}))})))}}))},i=this.loadResponses.length>1?this.loadResponses.map((function(e,t){return a(t)})):[];return i.length?this.mergePivots(i,t.joinDateRange):a()}},{key:"mergePivots",value:function(e,t){var n=e.reduce((function(e,t){return null!=e&&t.length>=e.length?e:t}),null);return n.map((function(r,a){return{xValues:t?[e.map((function(e){return e[a]&&e[a].xValues||[]})).join(", ")]:n[a].xValues,yValuesArray:m.unnest(e.map((function(e){return e[a].yValuesArray})))}}))}},{key:"pivotedRows",value:function(e){return this.chartPivot(e)}},{key:"chartPivot",value:function(e){var t=this;return this.pivot(e).map((function(e){var n=e.xValues,r=e.yValuesArray;return Q({category:t.axisValuesString(n,","),x:t.axisValuesString(n,","),xValues:n},r.map((function(e){var n,r=T.default(e,2),a=r[0],i=r[1];return E.default({},t.axisValuesString(a,","),i&&(n=i,t.parseDateMeasures&&V.test(n)?new Date(n):Number.isNaN(Number.parseFloat(n))?n:Number.parseFloat(n)))})).reduce((function(e,t){return Object.assign(e,t)}),{}))}))}},{key:"tablePivot",value:function(e){var t=this.normalizePivotConfig(e||{}),n=t.x.concat(t.y).includes("measures");return this.pivot(t).map((function(e){var r=e.xValues,a=e.yValuesArray;return m.fromPairs(t.x.map((function(e,t){return[e,r[t]]})).concat(n?a.map((function(e){var t=T.default(e,2),n=t[0],r=t[1];return[n.length?n.join():"value",r]})):[]))}))}},{key:"tableColumns",value:function(e){var t=this.normalizePivotConfig(e||{}),n=m.pipe(m.pluck("annotation"),m.reduce(m.mergeDeepLeft(),{}))(this.loadResponses),r=Object.values(n).reduce((function(e,t){return Q(Q({},e),t)}),{}),a={},i=function(e){var t=r[e]||{};return{key:e,title:t.title,shortTitle:t.shortTitle,type:t.type,format:t.format,meta:t.meta}},o=this.pivot(t);(o[0]&&o[0].yValuesArray||[]).forEach((function(e){var n=T.default(e,1)[0];if(n.length>0){var r=a;n.forEach((function(e,n){r[e]={key:e,memberId:"measures"===t.y[n]?e:t.y[n],children:r[e]&&r[e].children||{}},r=r[e].children}))}}));var s=[];return!o.length&&t.y.includes("measures")&&(s=(this.loadResponses[0].query.measures||[]).map((function(e){return Q(Q({},i(e)),{},{dataIndex:e})}))),!t.y.length&&t.x.includes("measures")&&s.push({key:"value",dataIndex:"value",title:"Value",shortTitle:"Value",type:"string"}),t.x.map((function(e){return"measures"===e?{key:"measures",dataIndex:"measures",title:"Measures",shortTitle:"Measures",type:"string"}:Q(Q({},i(e)),{},{dataIndex:e})})).concat(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return 0===Object.keys(t).length?[]:Object.values(t).map((function(t){var r=t.key,a=P.default(t,["key"]),o=e(a.children,[].concat(D.default(n),[r])),s=i(a.memberId),c=s.title,u=s.shortTitle,l=P.default(s,["title","shortTitle"]),p=r!==a.memberId||null==c?r:"";return o.length?Q(Q({},l),{},{key:r,title:[c,p].join(" ").trim(),shortTitle:p||u,children:o}):Q(Q({},l),{},{key:r,dataIndex:[].concat(D.default(n),[r]).join(),title:[c,p].join(" ").trim(),shortTitle:p||u})}))}(a)).concat(s)}},{key:"totalRow",value:function(){return this.chartPivot()[0]}},{key:"categories",value:function(e){return this.chartPivot(e)}},{key:"seriesNames",value:function(t){var n=this;t=this.normalizePivotConfig(t);var r=m.pipe(m.pluck("annotation"),m.pluck("measures"),m.mergeAll)(this.loadResponses),a=m.unnest(this.loadResponses.map((function(e,r){return m.pipe(m.map(n.axisValues(t.y,r)),m.unnest,m.uniq)(n.timeDimensionBackwardCompatibleData(r))})));return a.map((function(a){return{title:n.axisValuesString(t.y.find((function(e){return"measures"===e}))?m.dropLast(1,a).concat(r[e.measureFromAxis(a)].title):a,", "),key:n.axisValuesString(a,","),yValues:a}}))}},{key:"query",value:function(){if(this.queryType!==Y.REGULAR_QUERY)throw new Error("Method is not supported for a '".concat(this.queryType,"' query type. Please use decompose"));return this.loadResponses[0].query}},{key:"pivotQuery",value:function(){return this.loadResponse.pivotQuery||null}},{key:"rawData",value:function(){if(this.queryType!==Y.REGULAR_QUERY)throw new Error("Method is not supported for a '".concat(this.queryType,"' query type. Please use decompose"));return this.loadResponses[0].data}},{key:"annotation",value:function(){if(this.queryType!==Y.REGULAR_QUERY)throw new Error("Method is not supported for a '".concat(this.queryType,"' query type. Please use decompose"));return this.loadResponses[0].annotation}},{key:"timeDimensionBackwardCompatibleData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.backwardCompatibleData[t]){var n=this.loadResponses[t],r=n.data,a=n.query,i=(a.timeDimensions||[]).filter((function(e){return!!e.granularity}));this.backwardCompatibleData[t]=r.map((function(t){return Q(Q({},t),m.fromPairs(Object.keys(t).filter((function(n){return i.find((function(e){return e.dimension===n}))&&!t[e.timeDimensionMember(i.find((function(e){return e.dimension===n})))]})).map((function(n){return[e.timeDimensionMember(i.find((function(e){return e.dimension===n}))),t[n]]}))))}))}return this.backwardCompatibleData[t]}},{key:"decompose",value:function(){var t=this;return this.loadResponses.map((function(n){return new e({queryType:Y.REGULAR_QUERY,pivotQuery:Q(Q({},n.query),{},{queryType:Y.REGULAR_QUERY}),results:[n]},t.options)}))}},{key:"serialize",value:function(){return{loadResponse:m.clone(this.loadResponse)}}}],[{key:"getNormalizedPivotConfig",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={x:[],y:[],fillMissingDates:!0,joinDateRange:!1},a=t.measures,i=void 0===a?[]:a,o=t.dimensions,s=void 0===o?[]:o,c=(t.timeDimensions||[]).filter((function(e){return!!e.granularity}));n=n||(c.length?{x:c.map((function(t){return e.timeDimensionMember(t)})),y:s}:{x:s,y:[]});var u=function(n){return n.map((function(n){return c.find((function(e){return e.dimension===n}))&&!s.find((function(e){return e===n}))?e.timeDimensionMember(t.timeDimensions.find((function(e){return e.dimension===n}))):n}))};(n=m.mergeDeepLeft(n,r)).x=u(n.x),n.y=u(n.y);var l=n.x.concat(n.y),p=c.map((function(t){return e.timeDimensionMember(t)})).concat(s),d=function(e){return p.includes(e)||"measures"===e};return n.x=n.x.concat(p.filter((function(e){return!l.includes(e)}))).filter(d),n.y=n.y.filter(d),n.x.concat(n.y).find((function(e){return"measures"===e}))||n.y.push("measures"),i.length||(n.x=n.x.filter((function(e){return"measures"!==e})),n.y=n.y.filter((function(e){return"measures"!==e}))),n}}]),e}(),H=function(){function e(t){C.default(this,e),this.sqlQuery=t}return _.default(e,[{key:"rawQuery",value:function(){return this.sqlQuery.sql}},{key:"sql",value:function(){return this.rawQuery().sql[0]}}]),e}(),W=function(e){return m.fromPairs(e.map((function(e){return[e.name,e]})))},J={string:[{name:"contains",title:"contains"},{name:"notContains",title:"does not contain"},{name:"equals",title:"equals"},{name:"notEquals",title:"does not equal"},{name:"set",title:"is set"},{name:"notSet",title:"is not set"}],number:[{name:"equals",title:"equals"},{name:"notEquals",title:"does not equal"},{name:"set",title:"is set"},{name:"notSet",title:"is not set"},{name:"gt",title:">"},{name:"gte",title:">="},{name:"lt",title:"<"},{name:"lte",title:"<="}]},$=function(){function e(t){C.default(this,e),this.meta=t;var n=this.meta.cubes;this.cubes=n,this.cubesMap=m.fromPairs(n.map((function(e){return[e.name,{measures:W(e.measures),dimensions:W(e.dimensions),segments:W(e.segments)}]})))}return _.default(e,[{key:"membersForQuery",value:function(e,t){return m.unnest(this.cubes.map((function(e){return e[t]})))}},{key:"resolveMember",value:function(e,t){var n=this,r=e.split("."),a=T.default(r,1)[0];if(!this.cubesMap[a])return{title:e,error:"Cube not found ".concat(a," for path '").concat(e,"'")};var i=(Array.isArray(t)?t:[t]).map((function(t){return n.cubesMap[a][t]&&n.cubesMap[a][t][e]})).find((function(e){return e}));return i||{title:e,error:"Path not found '".concat(e,"'")}}},{key:"defaultTimeDimensionNameFor",value:function(e){var t=this,n=e.split("."),r=T.default(n,1)[0];return this.cubesMap[r]?Object.keys(this.cubesMap[r].dimensions||{}).find((function(e){return"time"===t.cubesMap[r].dimensions[e].type})):null}},{key:"filterOperatorsForMember",value:function(e,t){var n=this.resolveMember(e,t);return J[n.type]||J.string}}]),e}(),X=function(){function e(t){C.default(this,e),this.progressResponse=t}return _.default(e,[{key:"stage",value:function(){return this.progressResponse.stage}},{key:"timeElapsed",value:function(){return this.progressResponse.timeElapsed}}]),e}();function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){E.default(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te=function(){function e(t){var n=t.authorization,r=t.apiUrl,a=t.headers,i=void 0===a?{}:a,o=t.credentials;C.default(this,e),this.authorization=n,this.apiUrl=r,this.headers=i,this.credentials=o}return _.default(e,[{key:"request",value:function(e,t){var n=this,r=t.baseRequestId,a=P.default(t,["baseRequestId"]),i=new URLSearchParams(a&&Object.keys(a).map((function(e){return E.default({},e,"object"===O.default(a[e])?JSON.stringify(a[e]):a[e])})).reduce((function(e,t){return ee(ee({},e),t)}),{})),o=1;return{subscribe:function(t){var a=this;return k.default(S.default.mark((function s(){var c;return S.default.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,R.default("".concat(n.apiUrl,"/").concat(e).concat(i.toString().length?"?".concat(i):""),{headers:ee({Authorization:n.authorization,"x-request-id":r&&"".concat(r,"-span-").concat(o++)},n.headers),credentials:n.credentials});case 2:return c=s.sent,s.abrupt("return",t(c,(function(){return a.subscribe(t)})));case 4:case"end":return s.stop()}}),s)})))()}}}}]),e}();function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B.default(e);if(t){var a=B.default(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return L.default(this,n)}}var re=function(e){q.default(n,e);var t=ne(n);function n(e,r){var a;return C.default(this,n),(a=t.call(this,e)).response=r,a}return n}(I.default(Error));function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){E.default(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){E.default(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ce=0,ue="Mutex has been changed",le=function(){function e(t,n){C.default(this,e),"object"===O.default(t)&&(n=t,t=void 0),n=n||{},this.apiToken=t,this.apiUrl=n.apiUrl||"https://statsbot.co/cubejs-api/v1",this.headers=n.headers||{},this.credentials=n.credentials,this.transport=n.transport||new te({authorization:"function"==typeof t?void 0:t,apiUrl:this.apiUrl,headers:this.headers,credentials:this.credentials}),this.pollInterval=n.pollInterval||5,this.parseDateMeasures=n.parseDateMeasures}var t;return _.default(e,[{key:"request",value:function(e,t){return this.transport.request(e,se({baseRequestId:w.default()},t))}},{key:"loadMethod",value:function(e,t,n,r){var a=this,i=++ce;"function"!=typeof n||r||(r=n,n=void 0);var o=(n=n||{}).mutexKey||"default";n.mutexObj&&(n.mutexObj[o]=i);var s,c=this.updateTransportAuthorization().then((function(){return e()})),u=!1,l=function(){var e=k.default(S.default.mark((function e(){var t;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c;case 2:if(t=e.sent,!n.mutexObj||n.mutexObj[o]===i){e.next=9;break}if(u=!0,!t.unsubscribe){e.next=8;break}return e.next=8,t.unsubscribe();case 8:throw ue;case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=k.default(S.default.mark((function e(i,o){var s,p,d,m,f,h;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c;case 2:return s=e.sent,p=function(){var e=k.default(S.default.mark((function e(){return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.subscribe||u){e.next=8;break}if(!s.unsubscribe){e.next=5;break}return e.abrupt("return",o());case 5:return e.next=7,new Promise((function(e){return setTimeout((function(){return e()}),1e3*a.pollInterval)}));case 7:return e.abrupt("return",o());case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=k.default(S.default.mark((function e(t){return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=5;break}if(!t){e.next=4;break}return e.next=4,new Promise((function(e){return setTimeout((function(){return e()}),1e3*a.pollInterval)}));case 4:return e.abrupt("return",o());case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=7,a.updateTransportAuthorization();case 7:if(502!==i.status){e.next=11;break}return e.next=10,l();case 10:return e.abrupt("return",d(!0));case 11:return e.next=13,i.json();case 13:if("Continue wait"!==(m=e.sent).error){e.next=19;break}return e.next=17,l();case 17:return n.progressCallback&&n.progressCallback(new X(m)),e.abrupt("return",d());case 19:if(200===i.status){e.next=32;break}return e.next=22,l();case 22:if(n.subscribe||!s.unsubscribe){e.next=25;break}return e.next=25,s.unsubscribe();case 25:if(f=new re(m.error,m),!r){e.next=30;break}r(f),e.next=31;break;case 30:throw f;case 31:return e.abrupt("return",p());case 32:return e.next=34,l();case 34:if(n.subscribe||!s.unsubscribe){e.next=37;break}return e.next=37,s.unsubscribe();case 37:if(h=t(m),!r){e.next=42;break}r(null,h),e.next=43;break;case 42:return e.abrupt("return",h);case 43:return e.abrupt("return",p());case 44:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=c.then((function(e){return function(e){return new Promise((function(t,n){e.then((function(e){return t(e)}),(function(e){return e!==ue&&n(e)}))}))}(e.subscribe(p))}));return r?{unsubscribe:(s=k.default(S.default.mark((function e(){var t;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c;case 2:if(t=e.sent,u=!0,!t.unsubscribe){e.next=6;break}return e.abrupt("return",t.unsubscribe());case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e)}))),function(){return s.apply(this,arguments)})}:d}},{key:"updateTransportAuthorization",value:(t=k.default(S.default.mark((function e(){var t;return S.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof this.apiToken){e.next=5;break}return e.next=3,this.apiToken();case 3:t=e.sent,this.transport.authorization!==t&&(this.transport.authorization=t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"load",value:function(e,t,n){var r=this;return this.loadMethod((function(){return r.request("load",{query:e,queryType:"multi"})}),(function(e){return new K(e,{parseDateMeasures:r.parseDateMeasures})}),t,n)}},{key:"sql",value:function(e,t,n){var r=this;return this.loadMethod((function(){return r.request("sql",{query:e})}),(function(e){return Array.isArray(e)?e.map((function(e){return new H(e)})):new H(e)}),t,n)}},{key:"meta",value:function(e,t){var n=this;return this.loadMethod((function(){return n.request("meta")}),(function(e){return new $(e)}),e,t)}},{key:"dryRun",value:function(e,t,n){var r=this;return this.loadMethod((function(){return r.request("dry-run",{query:e})}),(function(e){return e}),t,n)}},{key:"subscribe",value:function(e,t,n){var r=this;return this.loadMethod((function(){return r.request("subscribe",{query:e,queryType:"multi"})}),(function(e){return new K(e,{parseDateMeasures:r.parseDateMeasures})}),se(se({},t),{},{subscribe:!0}),n)}}]),e}();t.HttpTransport=te,t.ResultSet=K,t.default=function(e,t){return new le(e,t)},t.defaultHeuristics=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=n.meta,a=n.sessionGranularity,i=a||"day",o={};if(Array.isArray(e)||Array.isArray(t))return e;if(e){if(1===(t.timeDimensions||[]).length&&1===(e.timeDimensions||[]).length&&e.timeDimensions[0].granularity&&t.timeDimensions[0].granularity!==e.timeDimensions[0].granularity&&(o=ie(ie({},o),{},{sessionGranularity:e.timeDimensions[0].granularity})),0===(t.measures||[]).length&&(e.measures||[]).length>0||1===(t.measures||[]).length&&1===(e.measures||[]).length&&t.measures[0]!==e.measures[0]){var s=r.defaultTimeDimensionNameFor(e.measures[0]);return e=ie(ie({},e),{},{timeDimensions:s?[{dimension:s,granularity:i}]:[]}),ie(ie({},o),{},{pivotConfig:null,shouldApplyHeuristicOrder:!0,query:e,chartType:s?"line":"number"})}return 0===(t.dimensions||[]).length&&(e.dimensions||[]).length>0?(e=ie(ie({},e),{},{timeDimensions:(e.timeDimensions||[]).map((function(e){return ie(ie({},e),{},{granularity:void 0})}))}),ie(ie({},o),{},{pivotConfig:null,shouldApplyHeuristicOrder:!0,query:e,chartType:"table"})):(t.dimensions||[]).length>0&&0===(e.dimensions||[]).length?(e=ie(ie({},e),{},{timeDimensions:(e.timeDimensions||[]).map((function(e){return ie(ie({},e),{},{granularity:e.granularity||i})}))}),ie(ie({},o),{},{pivotConfig:null,shouldApplyHeuristicOrder:!0,query:e,chartType:(e.timeDimensions||[]).length?"line":"number"})):((t.dimensions||[]).length>0||(t.measures||[]).length>0)&&0===(e.dimensions||[]).length&&0===(e.measures||[]).length?(e=ie(ie({},e),{},{timeDimensions:[],filters:[]}),ie(ie({},o),{},{pivotConfig:null,shouldApplyHeuristicOrder:!0,query:e,sessionGranularity:null})):o}if(o.chartType){var c=o.chartType;if(("line"===c||"area"===c)&&1===(t.timeDimensions||[]).length&&!t.timeDimensions[0].granularity){var u=T.default(t.timeDimensions,1),l=u[0];return ie(ie({},o),{},{pivotConfig:null,query:ie(ie({},t),{},{timeDimensions:[ie(ie({},l),{},{granularity:i})]})})}if(("pie"===c||"table"===c||"number"===c)&&1===(t.timeDimensions||[]).length&&t.timeDimensions[0].granularity){var p=T.default(t.timeDimensions,1),d=p[0];return ie(ie({},o),{},{pivotConfig:null,shouldApplyHeuristicOrder:!0,query:ie(ie({},t),{},{timeDimensions:[ie(ie({},d),{},{granularity:void 0})]})})}}return o},t.defaultOrder=function(e){var t=(e.timeDimensions||[]).find((function(e){return e.granularity}));return t?E.default({},t.dimension,"asc"):(e.measures||[]).length>0&&(e.dimensions||[]).length>0?E.default({},e.measures[0],"desc"):(e.dimensions||[]).length>0?E.default({},e.dimensions[0],"asc"):{}},t.flattenFilters=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.reduce((function(t,n){return n.or||n.and?[].concat(D.default(t),D.default(e(n.or||n.and))):[].concat(D.default(t),[n])}),[])},t.isQueryPresent=function(e){return(Array.isArray(e)?e:[e]).every((function(e){return e.measures&&e.measures.length||e.dimensions&&e.dimensions.length||e.timeDimensions&&e.timeDimensions.length}))},t.moveItemInArray=function(e,t,n){var r=D.default(e),a=r.splice(t,1),i=T.default(a,1)[0];return r.splice(n,0,i),r},t.movePivotItem=function(e,t,n,r,a){var i=ie(ie({},e),{},{x:D.default(e.x),y:D.default(e.y)}),o=e[r][t],s=i[a].length-1;return"measures"===o?n=s+1:n>=s&&"measures"===i[a][s]&&(n=s-1),i[r].splice(t,1),i[a].splice(n,0,o),i}},1394:function(e,t){},1440:function(e,t,n){var r={"./Binary_Property/ASCII.js":1441,"./Binary_Property/ASCII_Hex_Digit.js":1442,"./Binary_Property/Alphabetic.js":1443,"./Binary_Property/Any.js":1444,"./Binary_Property/Assigned.js":1445,"./Binary_Property/Bidi_Control.js":1446,"./Binary_Property/Bidi_Mirrored.js":1447,"./Binary_Property/Case_Ignorable.js":1448,"./Binary_Property/Cased.js":1449,"./Binary_Property/Changes_When_Casefolded.js":1450,"./Binary_Property/Changes_When_Casemapped.js":1451,"./Binary_Property/Changes_When_Lowercased.js":1452,"./Binary_Property/Changes_When_NFKC_Casefolded.js":1453,"./Binary_Property/Changes_When_Titlecased.js":1454,"./Binary_Property/Changes_When_Uppercased.js":1455,"./Binary_Property/Dash.js":1456,"./Binary_Property/Default_Ignorable_Code_Point.js":1457,"./Binary_Property/Deprecated.js":1458,"./Binary_Property/Diacritic.js":1459,"./Binary_Property/Emoji.js":1460,"./Binary_Property/Emoji_Component.js":1461,"./Binary_Property/Emoji_Modifier.js":1462,"./Binary_Property/Emoji_Modifier_Base.js":1463,"./Binary_Property/Emoji_Presentation.js":1464,"./Binary_Property/Extended_Pictographic.js":1465,"./Binary_Property/Extender.js":1466,"./Binary_Property/Grapheme_Base.js":1467,"./Binary_Property/Grapheme_Extend.js":1468,"./Binary_Property/Hex_Digit.js":1469,"./Binary_Property/IDS_Binary_Operator.js":1470,"./Binary_Property/IDS_Trinary_Operator.js":1471,"./Binary_Property/ID_Continue.js":1472,"./Binary_Property/ID_Start.js":1473,"./Binary_Property/Ideographic.js":1474,"./Binary_Property/Join_Control.js":1475,"./Binary_Property/Logical_Order_Exception.js":1476,"./Binary_Property/Lowercase.js":1477,"./Binary_Property/Math.js":1478,"./Binary_Property/Noncharacter_Code_Point.js":1479,"./Binary_Property/Pattern_Syntax.js":1480,"./Binary_Property/Pattern_White_Space.js":1481,"./Binary_Property/Quotation_Mark.js":1482,"./Binary_Property/Radical.js":1483,"./Binary_Property/Regional_Indicator.js":1484,"./Binary_Property/Sentence_Terminal.js":1485,"./Binary_Property/Soft_Dotted.js":1486,"./Binary_Property/Terminal_Punctuation.js":1487,"./Binary_Property/Unified_Ideograph.js":1488,"./Binary_Property/Uppercase.js":1489,"./Binary_Property/Variation_Selector.js":1490,"./Binary_Property/White_Space.js":1491,"./Binary_Property/XID_Continue.js":1492,"./Binary_Property/XID_Start.js":1493,"./General_Category/Cased_Letter.js":1494,"./General_Category/Close_Punctuation.js":1495,"./General_Category/Connector_Punctuation.js":1496,"./General_Category/Control.js":1497,"./General_Category/Currency_Symbol.js":1498,"./General_Category/Dash_Punctuation.js":1499,"./General_Category/Decimal_Number.js":1500,"./General_Category/Enclosing_Mark.js":1501,"./General_Category/Final_Punctuation.js":1502,"./General_Category/Format.js":1503,"./General_Category/Initial_Punctuation.js":1504,"./General_Category/Letter.js":1505,"./General_Category/Letter_Number.js":1506,"./General_Category/Line_Separator.js":1507,"./General_Category/Lowercase_Letter.js":1508,"./General_Category/Mark.js":1509,"./General_Category/Math_Symbol.js":1510,"./General_Category/Modifier_Letter.js":1511,"./General_Category/Modifier_Symbol.js":1512,"./General_Category/Nonspacing_Mark.js":1513,"./General_Category/Number.js":1514,"./General_Category/Open_Punctuation.js":1515,"./General_Category/Other.js":1516,"./General_Category/Other_Letter.js":1517,"./General_Category/Other_Number.js":1518,"./General_Category/Other_Punctuation.js":1519,"./General_Category/Other_Symbol.js":1520,"./General_Category/Paragraph_Separator.js":1521,"./General_Category/Private_Use.js":1522,"./General_Category/Punctuation.js":1523,"./General_Category/Separator.js":1524,"./General_Category/Space_Separator.js":1525,"./General_Category/Spacing_Mark.js":1526,"./General_Category/Surrogate.js":1527,"./General_Category/Symbol.js":1528,"./General_Category/Titlecase_Letter.js":1529,"./General_Category/Unassigned.js":1530,"./General_Category/Uppercase_Letter.js":1531,"./Script/Adlam.js":1532,"./Script/Ahom.js":1533,"./Script/Anatolian_Hieroglyphs.js":1534,"./Script/Arabic.js":1535,"./Script/Armenian.js":1536,"./Script/Avestan.js":1537,"./Script/Balinese.js":1538,"./Script/Bamum.js":1539,"./Script/Bassa_Vah.js":1540,"./Script/Batak.js":1541,"./Script/Bengali.js":1542,"./Script/Bhaiksuki.js":1543,"./Script/Bopomofo.js":1544,"./Script/Brahmi.js":1545,"./Script/Braille.js":1546,"./Script/Buginese.js":1547,"./Script/Buhid.js":1548,"./Script/Canadian_Aboriginal.js":1549,"./Script/Carian.js":1550,"./Script/Caucasian_Albanian.js":1551,"./Script/Chakma.js":1552,"./Script/Cham.js":1553,"./Script/Cherokee.js":1554,"./Script/Chorasmian.js":1555,"./Script/Common.js":1556,"./Script/Coptic.js":1557,"./Script/Cuneiform.js":1558,"./Script/Cypriot.js":1559,"./Script/Cyrillic.js":1560,"./Script/Deseret.js":1561,"./Script/Devanagari.js":1562,"./Script/Dives_Akuru.js":1563,"./Script/Dogra.js":1564,"./Script/Duployan.js":1565,"./Script/Egyptian_Hieroglyphs.js":1566,"./Script/Elbasan.js":1567,"./Script/Elymaic.js":1568,"./Script/Ethiopic.js":1569,"./Script/Georgian.js":1570,"./Script/Glagolitic.js":1571,"./Script/Gothic.js":1572,"./Script/Grantha.js":1573,"./Script/Greek.js":1574,"./Script/Gujarati.js":1575,"./Script/Gunjala_Gondi.js":1576,"./Script/Gurmukhi.js":1577,"./Script/Han.js":1578,"./Script/Hangul.js":1579,"./Script/Hanifi_Rohingya.js":1580,"./Script/Hanunoo.js":1581,"./Script/Hatran.js":1582,"./Script/Hebrew.js":1583,"./Script/Hiragana.js":1584,"./Script/Imperial_Aramaic.js":1585,"./Script/Inherited.js":1586,"./Script/Inscriptional_Pahlavi.js":1587,"./Script/Inscriptional_Parthian.js":1588,"./Script/Javanese.js":1589,"./Script/Kaithi.js":1590,"./Script/Kannada.js":1591,"./Script/Katakana.js":1592,"./Script/Kayah_Li.js":1593,"./Script/Kharoshthi.js":1594,"./Script/Khitan_Small_Script.js":1595,"./Script/Khmer.js":1596,"./Script/Khojki.js":1597,"./Script/Khudawadi.js":1598,"./Script/Lao.js":1599,"./Script/Latin.js":1600,"./Script/Lepcha.js":1601,"./Script/Limbu.js":1602,"./Script/Linear_A.js":1603,"./Script/Linear_B.js":1604,"./Script/Lisu.js":1605,"./Script/Lycian.js":1606,"./Script/Lydian.js":1607,"./Script/Mahajani.js":1608,"./Script/Makasar.js":1609,"./Script/Malayalam.js":1610,"./Script/Mandaic.js":1611,"./Script/Manichaean.js":1612,"./Script/Marchen.js":1613,"./Script/Masaram_Gondi.js":1614,"./Script/Medefaidrin.js":1615,"./Script/Meetei_Mayek.js":1616,"./Script/Mende_Kikakui.js":1617,"./Script/Meroitic_Cursive.js":1618,"./Script/Meroitic_Hieroglyphs.js":1619,"./Script/Miao.js":1620,"./Script/Modi.js":1621,"./Script/Mongolian.js":1622,"./Script/Mro.js":1623,"./Script/Multani.js":1624,"./Script/Myanmar.js":1625,"./Script/Nabataean.js":1626,"./Script/Nandinagari.js":1627,"./Script/New_Tai_Lue.js":1628,"./Script/Newa.js":1629,"./Script/Nko.js":1630,"./Script/Nushu.js":1631,"./Script/Nyiakeng_Puachue_Hmong.js":1632,"./Script/Ogham.js":1633,"./Script/Ol_Chiki.js":1634,"./Script/Old_Hungarian.js":1635,"./Script/Old_Italic.js":1636,"./Script/Old_North_Arabian.js":1637,"./Script/Old_Permic.js":1638,"./Script/Old_Persian.js":1639,"./Script/Old_Sogdian.js":1640,"./Script/Old_South_Arabian.js":1641,"./Script/Old_Turkic.js":1642,"./Script/Oriya.js":1643,"./Script/Osage.js":1644,"./Script/Osmanya.js":1645,"./Script/Pahawh_Hmong.js":1646,"./Script/Palmyrene.js":1647,"./Script/Pau_Cin_Hau.js":1648,"./Script/Phags_Pa.js":1649,"./Script/Phoenician.js":1650,"./Script/Psalter_Pahlavi.js":1651,"./Script/Rejang.js":1652,"./Script/Runic.js":1653,"./Script/Samaritan.js":1654,"./Script/Saurashtra.js":1655,"./Script/Sharada.js":1656,"./Script/Shavian.js":1657,"./Script/Siddham.js":1658,"./Script/SignWriting.js":1659,"./Script/Sinhala.js":1660,"./Script/Sogdian.js":1661,"./Script/Sora_Sompeng.js":1662,"./Script/Soyombo.js":1663,"./Script/Sundanese.js":1664,"./Script/Syloti_Nagri.js":1665,"./Script/Syriac.js":1666,"./Script/Tagalog.js":1667,"./Script/Tagbanwa.js":1668,"./Script/Tai_Le.js":1669,"./Script/Tai_Tham.js":1670,"./Script/Tai_Viet.js":1671,"./Script/Takri.js":1672,"./Script/Tamil.js":1673,"./Script/Tangut.js":1674,"./Script/Telugu.js":1675,"./Script/Thaana.js":1676,"./Script/Thai.js":1677,"./Script/Tibetan.js":1678,"./Script/Tifinagh.js":1679,"./Script/Tirhuta.js":1680,"./Script/Ugaritic.js":1681,"./Script/Vai.js":1682,"./Script/Wancho.js":1683,"./Script/Warang_Citi.js":1684,"./Script/Yezidi.js":1685,"./Script/Yi.js":1686,"./Script/Zanabazar_Square.js":1687,"./Script_Extensions/Adlam.js":1688,"./Script_Extensions/Ahom.js":1689,"./Script_Extensions/Anatolian_Hieroglyphs.js":1690,"./Script_Extensions/Arabic.js":1691,"./Script_Extensions/Armenian.js":1692,"./Script_Extensions/Avestan.js":1693,"./Script_Extensions/Balinese.js":1694,"./Script_Extensions/Bamum.js":1695,"./Script_Extensions/Bassa_Vah.js":1696,"./Script_Extensions/Batak.js":1697,"./Script_Extensions/Bengali.js":1698,"./Script_Extensions/Bhaiksuki.js":1699,"./Script_Extensions/Bopomofo.js":1700,"./Script_Extensions/Brahmi.js":1701,"./Script_Extensions/Braille.js":1702,"./Script_Extensions/Buginese.js":1703,"./Script_Extensions/Buhid.js":1704,"./Script_Extensions/Canadian_Aboriginal.js":1705,"./Script_Extensions/Carian.js":1706,"./Script_Extensions/Caucasian_Albanian.js":1707,"./Script_Extensions/Chakma.js":1708,"./Script_Extensions/Cham.js":1709,"./Script_Extensions/Cherokee.js":1710,"./Script_Extensions/Chorasmian.js":1711,"./Script_Extensions/Common.js":1712,"./Script_Extensions/Coptic.js":1713,"./Script_Extensions/Cuneiform.js":1714,"./Script_Extensions/Cypriot.js":1715,"./Script_Extensions/Cyrillic.js":1716,"./Script_Extensions/Deseret.js":1717,"./Script_Extensions/Devanagari.js":1718,"./Script_Extensions/Dives_Akuru.js":1719,"./Script_Extensions/Dogra.js":1720,"./Script_Extensions/Duployan.js":1721,"./Script_Extensions/Egyptian_Hieroglyphs.js":1722,"./Script_Extensions/Elbasan.js":1723,"./Script_Extensions/Elymaic.js":1724,"./Script_Extensions/Ethiopic.js":1725,"./Script_Extensions/Georgian.js":1726,"./Script_Extensions/Glagolitic.js":1727,"./Script_Extensions/Gothic.js":1728,"./Script_Extensions/Grantha.js":1729,"./Script_Extensions/Greek.js":1730,"./Script_Extensions/Gujarati.js":1731,"./Script_Extensions/Gunjala_Gondi.js":1732,"./Script_Extensions/Gurmukhi.js":1733,"./Script_Extensions/Han.js":1734,"./Script_Extensions/Hangul.js":1735,"./Script_Extensions/Hanifi_Rohingya.js":1736,"./Script_Extensions/Hanunoo.js":1737,"./Script_Extensions/Hatran.js":1738,"./Script_Extensions/Hebrew.js":1739,"./Script_Extensions/Hiragana.js":1740,"./Script_Extensions/Imperial_Aramaic.js":1741,"./Script_Extensions/Inherited.js":1742,"./Script_Extensions/Inscriptional_Pahlavi.js":1743,"./Script_Extensions/Inscriptional_Parthian.js":1744,"./Script_Extensions/Javanese.js":1745,"./Script_Extensions/Kaithi.js":1746,"./Script_Extensions/Kannada.js":1747,"./Script_Extensions/Katakana.js":1748,"./Script_Extensions/Kayah_Li.js":1749,"./Script_Extensions/Kharoshthi.js":1750,"./Script_Extensions/Khitan_Small_Script.js":1751,"./Script_Extensions/Khmer.js":1752,"./Script_Extensions/Khojki.js":1753,"./Script_Extensions/Khudawadi.js":1754,"./Script_Extensions/Lao.js":1755,"./Script_Extensions/Latin.js":1756,"./Script_Extensions/Lepcha.js":1757,"./Script_Extensions/Limbu.js":1758,"./Script_Extensions/Linear_A.js":1759,"./Script_Extensions/Linear_B.js":1760,"./Script_Extensions/Lisu.js":1761,"./Script_Extensions/Lycian.js":1762,"./Script_Extensions/Lydian.js":1763,"./Script_Extensions/Mahajani.js":1764,"./Script_Extensions/Makasar.js":1765,"./Script_Extensions/Malayalam.js":1766,"./Script_Extensions/Mandaic.js":1767,"./Script_Extensions/Manichaean.js":1768,"./Script_Extensions/Marchen.js":1769,"./Script_Extensions/Masaram_Gondi.js":1770,"./Script_Extensions/Medefaidrin.js":1771,"./Script_Extensions/Meetei_Mayek.js":1772,"./Script_Extensions/Mende_Kikakui.js":1773,"./Script_Extensions/Meroitic_Cursive.js":1774,"./Script_Extensions/Meroitic_Hieroglyphs.js":1775,"./Script_Extensions/Miao.js":1776,"./Script_Extensions/Modi.js":1777,"./Script_Extensions/Mongolian.js":1778,"./Script_Extensions/Mro.js":1779,"./Script_Extensions/Multani.js":1780,"./Script_Extensions/Myanmar.js":1781,"./Script_Extensions/Nabataean.js":1782,"./Script_Extensions/Nandinagari.js":1783,"./Script_Extensions/New_Tai_Lue.js":1784,"./Script_Extensions/Newa.js":1785,"./Script_Extensions/Nko.js":1786,"./Script_Extensions/Nushu.js":1787,"./Script_Extensions/Nyiakeng_Puachue_Hmong.js":1788,"./Script_Extensions/Ogham.js":1789,"./Script_Extensions/Ol_Chiki.js":1790,"./Script_Extensions/Old_Hungarian.js":1791,"./Script_Extensions/Old_Italic.js":1792,"./Script_Extensions/Old_North_Arabian.js":1793,"./Script_Extensions/Old_Permic.js":1794,"./Script_Extensions/Old_Persian.js":1795,"./Script_Extensions/Old_Sogdian.js":1796,"./Script_Extensions/Old_South_Arabian.js":1797,"./Script_Extensions/Old_Turkic.js":1798,"./Script_Extensions/Oriya.js":1799,"./Script_Extensions/Osage.js":1800,"./Script_Extensions/Osmanya.js":1801,"./Script_Extensions/Pahawh_Hmong.js":1802,"./Script_Extensions/Palmyrene.js":1803,"./Script_Extensions/Pau_Cin_Hau.js":1804,"./Script_Extensions/Phags_Pa.js":1805,"./Script_Extensions/Phoenician.js":1806,"./Script_Extensions/Psalter_Pahlavi.js":1807,"./Script_Extensions/Rejang.js":1808,"./Script_Extensions/Runic.js":1809,"./Script_Extensions/Samaritan.js":1810,"./Script_Extensions/Saurashtra.js":1811,"./Script_Extensions/Sharada.js":1812,"./Script_Extensions/Shavian.js":1813,"./Script_Extensions/Siddham.js":1814,"./Script_Extensions/SignWriting.js":1815,"./Script_Extensions/Sinhala.js":1816,"./Script_Extensions/Sogdian.js":1817,"./Script_Extensions/Sora_Sompeng.js":1818,"./Script_Extensions/Soyombo.js":1819,"./Script_Extensions/Sundanese.js":1820,"./Script_Extensions/Syloti_Nagri.js":1821,"./Script_Extensions/Syriac.js":1822,"./Script_Extensions/Tagalog.js":1823,"./Script_Extensions/Tagbanwa.js":1824,"./Script_Extensions/Tai_Le.js":1825,"./Script_Extensions/Tai_Tham.js":1826,"./Script_Extensions/Tai_Viet.js":1827,"./Script_Extensions/Takri.js":1828,"./Script_Extensions/Tamil.js":1829,"./Script_Extensions/Tangut.js":1830,"./Script_Extensions/Telugu.js":1831,"./Script_Extensions/Thaana.js":1832,"./Script_Extensions/Thai.js":1833,"./Script_Extensions/Tibetan.js":1834,"./Script_Extensions/Tifinagh.js":1835,"./Script_Extensions/Tirhuta.js":1836,"./Script_Extensions/Ugaritic.js":1837,"./Script_Extensions/Vai.js":1838,"./Script_Extensions/Wancho.js":1839,"./Script_Extensions/Warang_Citi.js":1840,"./Script_Extensions/Yezidi.js":1841,"./Script_Extensions/Yi.js":1842,"./Script_Extensions/Zanabazar_Square.js":1843,"./index.js":1844,"./unicode-version.js":1845};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=1440},2215:function(e,t,n){},2216:function(e,t,n){},2289:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"CubeContext",(function(){return fe})),n.d(r,"CubeProvider",(function(){return _e})),n.d(r,"QueryBuilder",(function(){return Ce})),n.d(r,"QueryRenderer",(function(){return ge})),n.d(r,"QueryRendererWithTotals",(function(){return xe})),n.d(r,"isQueryPresent",(function(){return me})),n.d(r,"useCubeQuery",(function(){return Pe}));var a={};n.r(a),n.d(a,"sourceCodeTemplate",(function(){return un})),n.d(a,"imports",(function(){return ln}));var i={};n.r(i),n.d(i,"sourceCodeTemplate",(function(){return mn})),n.d(i,"imports",(function(){return fn}));var o={};n.r(o),n.d(o,"sourceCodeTemplate",(function(){return bn})),n.d(o,"imports",(function(){return gn}));var s={};n.r(s),n.d(s,"sourceCodeTemplate",(function(){return En})),n.d(s,"imports",(function(){return On}));var c={};n.r(c),n.d(c,"sourceCodeTemplate",(function(){return _n})),n.d(c,"imports",(function(){return wn}));var u=n(0),l=n.n(u),p=n(37),d=n.n(p),m=n(82),f=n(129),h=n(31),y=n.n(h),b=n(56),g=n(101),v=n(102),j=n(108),x=n(107),S=n(143),k=n(223),E=function(e){Object(j.a)(a,e);var t,n,r=Object(x.a)(a);function a(e){var t;return Object(g.a)(this,a),(t=r.call(this,e)).state={},t}return Object(v.a)(a,[{key:"componentDidMount",value:(n=Object(b.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadFiles();case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"loadFiles",value:(t=Object(b.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(S.a)("/playground/files");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,this.setState({files:n.files});case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){return this.state.files?l.a.createElement(m.a,{to:!this.state.files.length||1===this.state.files.length&&"Orders.js"===this.state.files[0].fileName?"/schema":"/build"}):l.a.createElement("div",{style:{textAlign:"center",padding:24}},l.a.createElement(k.a,null))}}]),a}(u.Component),O=n(135),C=n.n(O),_=n(41),w=n(185),P=function e(t,n){var r=n||{},a=r.retries,i=Object(w.a)(r,["retries"]);return a=a||0,Object(S.a)(t,i).then(function(){var e=Object(b.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(500!==t.status){e.next=6;break}return e.next=3,t.text();case 3:n=e.sent;try{r=JSON.parse(n),n=r.error}catch(e){}throw n;case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(r){if("Network request failed"===r.message&&a>0)return e(t,{options:n,retries:a-1});throw r}))},D=function(e,t,n){return P(e,Object(_.a)(Object(_.a)({},t),{},{retries:n}))},T=function(){function e(){Object(g.a)(this,e)}var t,n,r,a,i,o;return Object(v.a)(e,[{key:"load",value:(o=Object(b.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadError=null,e.next=3,D("/playground/dashboard-app-create-status".concat(t?"?instant=true":""),void 0,10);case 3:return n=e.sent,e.next=6,n.json();case 6:(r=e.sent).error?this.loadError=r.error:(this.dashboardCreated="created"===r.status,this.installedTemplates=r.installedTemplates);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"applyTemplatePackages",value:(i=Object(b.a)(y.a.mark((function e(t){var n,r=arguments;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]?r[1]:null,this.playgroundContext){e.next=5;break}return e.next=4,this.loadContext();case 4:this.playgroundContext=e.sent;case 5:return e.abrupt("return",D("/playground/apply-template-packages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({toApply:t,templateConfig:n||{credentials:this.playgroundContext}})}));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"loadContext",value:(a=Object(b.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/playground/context");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",{cubejsToken:n.cubejsToken,apiUrl:n.apiUrl||window.location.href.split("#")[0].replace(/\/$/,"")});case 7:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})},{key:"templatePackages",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"react";return"react"===e.toLowerCase()?[{name:"react-antd-dynamic",description:"React Antd Dynamic"},{name:"react-antd-static",description:"React Antd Static"},{name:"react-material-static",description:"React Material UI Static"}]:"angular"===e.toLowerCase()?[{name:"ng-material-dynamic",description:"Angular Material UI Dynamic"}]:[]}},{key:"canAddChart",value:(r=Object(b.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if(!this.loadError){e.next=4;break}return e.abrupt("return",this.loadError);case 4:return e.abrupt("return",!!Object.keys(this.installedTemplates).find((function(e){return e.match(/-static$/)})));case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"addChart",value:(n=Object(b.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if(!this.loadError){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.applyTemplatePackages(["create-react-app",Object.keys(this.installedTemplates).find((function(e){return e.match(/-static$/)})),"static-chart"],{chartCode:t});case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"templates",value:(t=Object(b.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/playground/manifest");case 2:return e.next=4,e.sent.json();case 4:return t=e.sent,n=t.templates,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),e}(),M=n(45),A=n(233),R=n(137),q=(n(1074),n(1082),n(1083),n(710),n(1090),n(1091),n(1093),n(1094),n(1096),n(1098),n(1113),n(1117),n(1119),n(151)),L=n.n(q),B=n(267),I=n.n(B),N=n(635),Q=n.n(N),F=n(375),G=n.n(F),z=n(636),V=n.n(z),U=n(637),Y=n.n(U),K=n(376),H=n.n(K),W=n(112),J=n.n(W),$=n(978),X=n(2293),Z=n(2294),ee=n(2299),te=n(2298),ne=n(2297),re=n(916),ae=n.n(re),ie=n(638),oe=n.n(ie),se=n(268),ce=n.n(se),ue=(n(721),n(487)),le=n.n(ue),pe=n(320),de=n.n(pe),me=function(e){return(Array.isArray(e)?e:[e]).every((function(e){return e.measures&&e.measures.length||e.dimensions&&e.dimensions.length||e.timeDimensions&&e.timeDimensions.length}))},fe=Object(W.createContext)(null);function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){I()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=H()(e);if(t){var a=H()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Y()(this,n)}}var ge=function(e){V()(n,e);var t=be(n);function n(e){var r;return Q()(this,n),(r=t.call(this,e)).state={},r.mutexObj={},r}return G()(n,null,[{key:"isQueryPresent",value:function(e){return me(e)}}]),G()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.query,n=e.queries;t&&this.load(t),n&&this.loadQueries(n)}},{key:"shouldComponentUpdate",value:function(e,t){var n=this.props,r=n.query,a=n.queries,i=n.render,o=n.cubejsApi,s=n.loadSql,c=n.updateOnlyOnStateChange;return!c||(!Object($.a)(e.query,r)||!Object($.a)(e.queries,a)||(null==e.render||null==i)&&e.render!==i||e.cubejsApi!==o||e.loadSql!==s||!Object($.a)(t,this.state)||e.updateOnlyOnStateChange!==c)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.query,r=t.queries;Object($.a)(e.query,n)||this.load(n),Object($.a)(e.queries,r)||this.loadQueries(r)}},{key:"cubejsApi",value:function(){return this.props.cubejsApi||this.context&&this.context.cubejsApi}},{key:"load",value:function(e){var t=this,r=this.props.resetResultSetOnChange;this.setState(ye({isLoading:!0,error:null,sqlQuery:null},r?{resultSet:null}:{}));var a=this.props.loadSql,i=this.cubejsApi();e&&n.isQueryPresent(e)&&("only"===a?i.sql(e,{mutexObj:this.mutexObj,mutexKey:"sql"}).then((function(e){return t.setState({sqlQuery:e,error:null,isLoading:!1})})).catch((function(e){return t.setState(ye(ye({},r?{resultSet:null}:{}),{},{error:e,isLoading:!1}))})):a?Promise.all([i.sql(e,{mutexObj:this.mutexObj,mutexKey:"sql"}),i.load(e,{mutexObj:this.mutexObj,mutexKey:"query"})]).then((function(e){var n=L()(e,2),r=n[0],a=n[1];return t.setState({sqlQuery:r,resultSet:a,error:null,isLoading:!1})})).catch((function(e){return t.setState(ye(ye({},r?{resultSet:null}:{}),{},{error:e,isLoading:!1}))})):i.load(e,{mutexObj:this.mutexObj,mutexKey:"query"}).then((function(e){return t.setState({resultSet:e,error:null,isLoading:!1})})).catch((function(e){return t.setState(ye(ye({},r?{resultSet:null}:{}),{},{error:e,isLoading:!1}))})))}},{key:"loadQueries",value:function(e){var t=this,n=this.cubejsApi(),r=this.props.resetResultSetOnChange;this.setState(ye(ye({isLoading:!0},r?{resultSet:null}:{}),{},{error:null})),Promise.all(Object(X.a)(e).map((function(e){var r=L()(e,2),a=r[0],i=r[1];return n.load(i,{mutexObj:t.mutexObj,mutexKey:a}).then((function(e){return[a,e]}))}))).then((function(e){return t.setState({resultSet:Object(Z.a)(e),error:null,isLoading:!1})})).catch((function(e){return t.setState(ye(ye({},r?{resultSet:null}:{}),{},{error:e,isLoading:!1}))}))}},{key:"render",value:function(){var e=this.state,t=e.error,n=e.queries,r=e.resultSet,a=e.isLoading,i=e.sqlQuery,o=this.props.render;return o?o({error:t,resultSet:n?r||{}:r,loadingState:{isLoading:a},sqlQuery:i}):null}}]),n}(J.a.Component);function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){I()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}ge.contextType=fe,ge.defaultProps={cubejsApi:null,query:null,render:null,queries:null,loadSql:null,updateOnlyOnStateChange:!1,resetResultSetOnChange:!0};var xe=function(e){var t=e.query,n=oe()(e,["query"]);return J.a.createElement(ge,ae()({queries:{totals:je(je({},t),{},{dimensions:[],timeDimensions:t.timeDimensions?t.timeDimensions.map((function(e){return je(je({},e),{},{granularity:null})})):void 0}),main:t}},n))};function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){I()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=H()(e);if(t){var a=H()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Y()(this,n)}}xe.defaultProps={query:null,render:null,queries:null,loadSql:null};var Oe=[{name:void 0,title:"w/o grouping"},{name:"second",title:"Second"},{name:"minute",title:"Minute"},{name:"hour",title:"Hour"},{name:"day",title:"Day"},{name:"week",title:"Week"},{name:"month",title:"Month"},{name:"year",title:"Year"}],Ce=function(e){V()(a,e);var t,n,r=Ee(a);function a(e){var t;return Q()(this,a),(t=r.call(this,e)).state=ke({query:e.query,chartType:"line",orderMembers:[],pivotConfig:null,validatedQuery:e.query},e.vizState),t.mutexObj={},t}return G()(a,null,[{key:"getDerivedStateFromProps",value:function(e,t){var n=ke(ke({},t),e.vizState||{});if(Array.isArray(e.query))throw new Error("Array of queries is not supported.");return ke(ke({},n),{},{query:ke(ke({},n.query),e.query||{})})}},{key:"resolveMember",value:function(e,t){var n=t.meta,r=t.query;return n?Array.isArray(r)?r.reduce((function(t,r){return t.concat(a.resolveMember(e,{meta:n,query:r}))}),[]):"timeDimensions"===e?(r.timeDimensions||[]).map((function(e,t){return ke(ke({},e),{},{dimension:ke(ke({},n.resolveMember(e.dimension,"dimensions")),{},{granularities:Oe}),index:t})})):(r[e]||[]).map((function(t,r){return ke({index:r},n.resolveMember(t,e))})):[]}},{key:"getOrderMembers",value:function(e){var t=e.query;if(!e.meta)return[];var n=function(e){return{id:e.name,title:e.title}};return Object(ee.a)(Object(te.a)("id"),[].concat(de()(a.resolveMember("measures",e).map(n)),de()(a.resolveMember("dimensions",e).map(n)),de()(a.resolveMember("timeDimensions",e).map((function(e){return n(e.dimension)})))).map((function(e){var n;return ke(ke({},e),{},{order:(null===(n=t.order)||void 0===n?void 0:n[e.id])||"none"})})))}}]),G()(a,[{key:"componentDidMount",value:(n=le()(ce.a.mark((function e(){var t,n,r,i,o,s,c;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,n=t.query,r=t.pivotConfig,!this.isQueryPresent()){e.next=10;break}return e.next=4,Promise.all([this.cubejsApi().meta(),this.cubejsApi().dryRun(n)]);case 4:s=e.sent,c=L()(s,2),i=c[0],o=c[1].pivotQuery,e.next=13;break;case 10:return e.next=12,this.cubejsApi().meta();case 12:i=e.sent;case 13:this.setState({meta:i,orderMembers:a.getOrderMembers({meta:i,query:n}),pivotConfig:O.ResultSet.getNormalizedPivotConfig(o||{},r)});case 14:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"cubejsApi",value:function(){var e=this.props.cubejsApi;return e||this.context&&this.context.cubejsApi}},{key:"isQueryPresent",value:function(){var e=this.state.query;return ge.isQueryPresent(e)}},{key:"prepareRenderProps",value:function(e){var t=this,n=function(e){return e.name},r=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;return{add:function(n){var a=t.state.query;t.updateQuery(I()({},e,(a[e]||[]).concat(r(n))))},remove:function(n){var r=(t.state.query[e]||[]).concat([]);return r.splice(n.index,1),t.updateQuery(I()({},e,r))},update:function(n,a){var i=(t.state.query[e]||[]).concat([]);return i.splice(n.index,1,r(a)),t.updateQuery(I()({},e,i))}}},i=this.state,o=i.meta,s=i.query,c=i.orderMembers,u=void 0===c?[]:c,l=i.chartType,p=i.pivotConfig,d=i.validatedQuery,m=Object(ee.a)(Object(te.a)("member"),Object(O.flattenFilters)(o&&s.filters||[]).map((function(e){return ke(ke({},e),{},{member:e.member||e.dimension})}))).map((function(e,t){return ke(ke({},e),{},{dimension:o.resolveMember(e.member||e.dimension,["dimensions","measures"]),operators:o.filterOperatorsForMember(e.member||e.dimension,["dimensions","measures"]),index:t})}));return ke({meta:o,query:s,validatedQuery:d,isQueryPresent:this.isQueryPresent(),chartType:l,measures:a.resolveMember("measures",this.state),dimensions:a.resolveMember("dimensions",this.state),timeDimensions:a.resolveMember("timeDimensions",this.state),segments:(o&&s.segments||[]).map((function(e,t){return ke({index:t},o.resolveMember(e,"segments"))})),filters:m,orderMembers:u,availableMeasures:o&&o.membersForQuery(s,"measures")||[],availableDimensions:o&&o.membersForQuery(s,"dimensions")||[],availableTimeDimensions:(o&&o.membersForQuery(s,"dimensions")||[]).filter((function(e){return"time"===e.type})),availableSegments:o&&o.membersForQuery(s,"segments")||[],updateQuery:function(e){return t.updateQuery(e)},updateMeasures:r("measures"),updateDimensions:r("dimensions"),updateSegments:r("segments"),updateTimeDimensions:r("timeDimensions",(function(e){var t=e.compareDateRange?{compareDateRange:e.compareDateRange}:{dateRange:e.dateRange};return ke({dimension:e.dimension.name,granularity:e.granularity},t)})),updateFilters:r("filters",(function(e){return{dimension:e.dimension.name,operator:e.operator,values:e.values}})),updateChartType:function(e){return t.updateVizState({chartType:e})},updateOrder:{set:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";t.updateVizState({orderMembers:u.map((function(t){return ke(ke({},t),{},{order:t.id===e?n:t.order})}))})},update:function(e){t.updateQuery({order:e})},reorder:function(e,n){null!=e&&null!=n&&t.updateVizState({orderMembers:Object(O.moveItemInArray)(u,e,n)})}},pivotConfig:p,updatePivotConfig:{moveItem:function(e){var n=e.sourceIndex,r=e.destinationIndex,a=e.sourceAxis,i=e.destinationAxis,o=ke(ke({},p),{},{x:de()(p.x),y:de()(p.y)}),s=p[a][n],c=o[i].length-1;"measures"===s?r=c+1:r>=c&&"measures"===o[i][c]&&(r=c-1),o[a].splice(n,1),o[i].splice(r,0,s),t.updateVizState({pivotConfig:o})},update:function(e){var n=e.limit;null==n?t.updateVizState({pivotConfig:ke(ke({},p),e)}):t.updateQuery({limit:n})}}},e)}},{key:"updateQuery",value:function(e){var t=this.state.query;this.updateVizState({query:ke(ke({},t),e)})}},{key:"updateVizState",value:(t=le()(ce.a.mark((function e(t){var n,r,i,o,s,c,u,l,p,d,m,f,h,y,b;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.setQuery,i=n.setVizState,o=this.state,s=o.query,c=o.pivotConfig,u=this.applyStateChangeHeuristics(t),l=ke({},u.query||s),p=function(e){if(i){e.meta,e.validatedQuery;var t=oe()(e,["meta","validatedQuery"]);i(t)}e.query&&r&&r(e.query)},u.shouldApplyHeuristicOrder&&(l.order=Object(O.defaultOrder)(l)),d=Object(ne.a)(Object(te.a)("id"),a.getOrderMembers(ke(ke({},this.state),u))),m=(u.orderMembers||[]).map((function(e){return e.id})),f=(u.orderMembers||[]).filter((function(e){var t=e.id;return Boolean(d[t])})),Object.entries(d).forEach((function(e){var t=L()(e,2),n=t[0],r=t[1];m.includes(n)||f.push(r)})),h=ke(ke({},l),{},{order:Object(Z.a)(f.map((function(e){var t=e.id,n=e.order;return"none"!==n&&[t,n]})).filter(Boolean))}),u.pivotConfig=O.ResultSet.getNormalizedPivotConfig(h,void 0!==u.pivotConfig?u.pivotConfig:c),p(ke(ke({},t),{},{query:h,orderMembers:f})),this.setState(ke(ke({},u),{},{query:h,orderMembers:f})),y={},!ge.isQueryPresent(l)){e.next=28;break}return e.prev=16,e.next=19,this.cubejsApi().dryRun(l,{mutexObj:this.mutexObj});case 19:b=e.sent,y=b.pivotQuery,u.shouldApplyHeuristicOrder&&(h.order=(b.queryOrder||[]).reduce((function(e,t){return ke(ke({},e),t)}),{})),ge.isQueryPresent(s)&&(u=ke(ke({},u),{},{query:h,pivotConfig:O.ResultSet.getNormalizedPivotConfig(y,u.pivotConfig)}),this.setState(ke(ke({},u),{},{validatedQuery:this.validatedQuery(u)})),p(ke(ke({},this.state),u))),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(16),console.error(e.t0);case 28:case"end":return e.stop()}}),e,this,[[16,25]])}))),function(e){return t.apply(this,arguments)})},{key:"validatedQuery",value:function(e){var t=(e||this.state).query;return ke(ke({},t),{},{filters:(t.filters||[]).filter((function(e){return e.operator}))})}},{key:"defaultHeuristics",value:function(e){var t=this.state,n=t.query,r=t.sessionGranularity||"day";if(Array.isArray(n))return e;if(e.query){var a=n,i=e.query,o=this.state.meta;if(1===(a.timeDimensions||[]).length&&1===(i.timeDimensions||[]).length&&i.timeDimensions[0].granularity&&a.timeDimensions[0].granularity!==i.timeDimensions[0].granularity&&(e=ke(ke({},e),{},{sessionGranularity:i.timeDimensions[0].granularity})),0===(a.measures||[]).length&&(i.measures||[]).length>0||1===(a.measures||[]).length&&1===(i.measures||[]).length&&a.measures[0]!==i.measures[0]){var s=o.defaultTimeDimensionNameFor(i.measures[0]);return i=ke(ke({},i),{},{timeDimensions:s?[{dimension:s,granularity:r}]:[]}),ke(ke({},e),{},{pivotConfig:null,shouldApplyHeuristicOrder:!0,query:i,chartType:s?"line":"number"})}return 0===(a.dimensions||[]).length&&(i.dimensions||[]).length>0?(i=ke(ke({},i),{},{timeDimensions:(i.timeDimensions||[]).map((function(e){return ke(ke({},e),{},{granularity:void 0})}))}),ke(ke({},e),{},{pivotConfig:null,shouldApplyHeuristicOrder:!0,query:i,chartType:"table"})):(a.dimensions||[]).length>0&&0===(i.dimensions||[]).length?(i=ke(ke({},i),{},{timeDimensions:(i.timeDimensions||[]).map((function(e){return ke(ke({},e),{},{granularity:e.granularity||r})}))}),ke(ke({},e),{},{pivotConfig:null,shouldApplyHeuristicOrder:!0,query:i,chartType:(i.timeDimensions||[]).length?"line":"number"})):((a.dimensions||[]).length>0||(a.measures||[]).length>0)&&0===(i.dimensions||[]).length&&0===(i.measures||[]).length?(i=ke(ke({},i),{},{timeDimensions:[],filters:[]}),ke(ke({},e),{},{pivotConfig:null,shouldApplyHeuristicOrder:!0,query:i,sessionGranularity:null})):e}if(e.chartType){var c=e.chartType;if(("line"===c||"area"===c)&&1===(n.timeDimensions||[]).length&&!n.timeDimensions[0].granularity){var u=L()(n.timeDimensions,1)[0];return ke(ke({},e),{},{pivotConfig:null,query:ke(ke({},n),{},{timeDimensions:[ke(ke({},u),{},{granularity:r})]})})}if(("pie"===c||"table"===c||"number"===c)&&1===(n.timeDimensions||[]).length&&n.timeDimensions[0].granularity){var l=L()(n.timeDimensions,1)[0];return ke(ke({},e),{},{pivotConfig:null,shouldApplyHeuristicOrder:!0,query:ke(ke({},n),{},{timeDimensions:[ke(ke({},l),{},{granularity:void 0})]})})}}return e}},{key:"applyStateChangeHeuristics",value:function(e){var t=this.props,n=t.stateChangeHeuristics;return t.disableHeuristics?e:n&&n(this.state,e)||this.defaultHeuristics(e)}},{key:"render",value:function(){var e=this,t=this.state.query,n=this.props,r=n.cubejsApi,a=n.render;return n.wrapWithQueryRenderer?J.a.createElement(ge,{query:t,cubejsApi:r,resetResultSetOnChange:!1,render:function(t){return a?a(e.prepareRenderProps(t)):null}}):a?a(this.prepareRenderProps()):null}}]),a}(J.a.Component);Ce.contextType=fe,Ce.defaultProps={cubejsApi:null,query:{},setQuery:null,setVizState:null,stateChangeHeuristics:null,disableHeuristics:!1,render:null,wrapWithQueryRenderer:!0,vizState:{}};var _e=function(e){var t=e.cubejsApi,n=e.children;return J.a.createElement(fe.Provider,{value:{cubejsApi:t}},n)};function we(e){var t=Object(W.useRef)([]);return Object($.a)(e,t.current)||(t.current=e),t.current}var Pe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(W.useRef)({}),r=Object(W.useState)(null),a=L()(r,2),i=a[0],o=a[1],s=Object(W.useState)(!1),c=L()(s,2),u=c[0],l=c[1],p=Object(W.useState)(null),d=L()(p,2),m=d[0],f=d[1],h=Object(W.useState)(null),y=L()(h,2),b=y[0],g=y[1],v=Object(W.useState)(null),j=L()(v,2),x=j[0],S=j[1],k=Object(W.useContext)(fe),E=null,O=function(e){var t=e.progressResponse;return g(t)};return Object(W.useEffect)((function(){var r=t.skip,a=void 0!==r&&r,s=t.resetResultSetOnChange;function c(){return(c=le()(ce.a.mark((function r(){var c;return ce.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a||!e||!me(e)){r.next=30;break}if(!!Object($.a)(Object.keys(i&&i.order||{}),Object.keys(e.order||{}))&&Object($.a)(i,e)||((null==s||s)&&f(null),S(null),o(e)),l(!0),r.prev=4,!E){r.next=9;break}return r.next=8,E.unsubscribe();case 8:E=null;case 9:if(c=t.cubejsApi||k&&k.cubejsApi){r.next=12;break}throw new Error("Cube.js API client is not provided");case 12:if(!t.subscribe){r.next=16;break}E=c.subscribe(e,{mutexObj:n.current,mutexKey:"query",progressCallback:O},(function(e,t){e?S(e):f(t),l(!1),g(null)})),r.next=23;break;case 16:return r.t0=f,r.next=19,c.load(e,{mutexObj:n.current,mutexKey:"query",progressCallback:O});case 19:r.t1=r.sent,(0,r.t0)(r.t1),l(!1),g(null);case 23:r.next=30;break;case 25:r.prev=25,r.t2=r.catch(4),S(r.t2),l(!1),g(null);case 30:case"end":return r.stop()}}),r,null,[[4,25]])})))).apply(this,arguments)}return function(){c.apply(this,arguments)}(),function(){E&&(E.unsubscribe(),E=null)}}),we([e,Object.keys(e&&e.order||{}),t,k])),{isLoading:u,resultSet:m,error:x,progress:b}},De=n(203),Te=n(980),Me=n(917),Ae=n.n(Me),Re=n(918),qe=n.n(Re),Le=n(55),Be=n(913),Ie=n(2302),Ne=n(2303),Qe=n(2304),Fe=n(2305),Ge=n(2306),ze=n(2307),Ve=n(2308),Ue=n(2309),Ye=n(92),Ke=n(224),He=n(910),We=n(446),Je=n(46),$e=n(72);function Xe(){var e=Object(M.a)(["\n  &&& .ant-btn-primary:not([disabled]) {\n    background-color: var(--primary-bg);\n    color: var(--primary-color);\n    border: 1px solid var(--primary-color);\n    \n    &:not(:first-child):not(:last-child) {\n      border-left-color: var(--primary-color);\n      border-right-color: var(--primary-color);\n    }\n    \n    &:first-child {\n      border-right-color: var(--primary-color);\n    }\n    \n    &:last-child {\n      border-left-color: var(--primary-color);\n    }\n  }\n\n  && .ant-btn-primary:not([disabled]) + .ant-btn:not(.ant-btn-primary):not([disabled]) {\n    border-left-color: var(--primary-color);\n    \n    &:hover, &:active, &:focus {\n      border-left-color: var(--primary-color);\n    }\n  }\n"]);return Xe=function(){return e},e}function Ze(){var e=Object(M.a)(["\n  && {\n    padding: 5px 12px;\n    height: auto;\n    border-color: var(--dark-05-color); \n    color: var(--text-color);\n    box-shadow: none;\n\n    &:hover, &:active, &:focus {\n      border-color: var(--purple-04-color);\n      color: var(--primary-color);\n    }\n    \n    &.ant-btn-primary:not([disabled]) {\n      background: var(--primary-color);\n      color: white;\n      border-color: var(--primary-color);\n      place-self: center;\n    }\n    \n    &.ant-btn-icon-only {\n      display: inline-flex;\n      place-items: center;\n      padding: 5px 8px;\n      font-size: 14px;\n      \n      svg {\n        width: 15px;\n        height: 14px;\n      }\n    }\n    \n    .anticon {\n      display: inline-block;\n      height: 14px;\n    }\n    \n    &.ant-btn-sm {\n      padding: 0 8px;\n    }\n  }\n"]);return Ze=function(){return e},e}var et=Object(Je.b)($e.a)(Ze());et.Group=Object(Je.b)($e.a.Group)(Xe());var tt=et;function nt(){var e=Object(M.a)(["\n  font-weight: 500;\n  font-size: 12px;\n  line-height: 18px;\n  letter-spacing: 0.04em;\n  text-transform: uppercase;\n  color: var(--dark-03-color);\n  margin-bottom: 8px;\n"]);return nt=function(){return e},e}var rt=Je.b.div(nt());function at(){var e=Object(M.a)(["\n  display: flex;\n  flex-flow: row wrap; \n  margin-right: -8px;\n  margin-bottom: -8px;\n  \n  && > * {\n    margin-right: 8px !important;\n    margin-bottom: 8px !important;\n  }\n"]);return at=function(){return e},e}var it=Je.b.div(at()),ot=n(125);function st(){var e=Object(M.a)(["\n  &&& {\n    &.ant-select-single {\n      .ant-select-selector {\n        padding: 5px 12px;\n        \n        .ant-select-selection-placeholder {\n        line-height: 22px;\n        }\n      }\n    }\n    \n    &.ant-select-multiple {\n      .ant-select-selector {\n        padding: 3px 12px;      \n      }\n      \n      .ant-select-selection-item {\n        margin-top: 0;\n        margin-bottom: 0;\n      }\n    }\n    \n    .ant-select-selection-item {\n      font-size: 14px;\n      line-height: 22px;\n    }\n      \n    .ant-select-selector {  \n      height: auto;\n      border-color: 1px solid var(--dark-05-color);\n      color: var(--text-color);\n      font-size: 14px;\n      line-height: 22px;\n      \n      &:hover, &:active, &:focus {\n        border-color: var(--purple-04-color);\n        color: var(--primary-color);\n      }    \n    }\n    \n    .ant-select-selector::after {\n      font-size: 14px;\n      line-height: 22px;\n    }\n  }\n"]);return st=function(){return e},e}var ct=Object(Je.b)(ot.a)(st()),ut=n(300);function lt(){var e=Object(M.a)(["\n  && .ant-select-selector {\n    padding: 5px 12px;\n    height: auto;\n    border-color: 1px solid var(--dark-05-color);\n    color: var(--text-color);\n    \n    &:hover, &:active, &:focus {\n      border-color: var(--purple-04-color);\n      color: var(--primary-color);\n    }\n  }\n"]);return lt=function(){return e},e}Object(Je.b)(ut.a)(lt());var pt=n(912);function dt(){var e=Object(M.a)(["\n  && {\n    border-radius: 8px;\n    border: none;\n  \n    .ant-card-head {\n      border-bottom: 1px solid #D7D7F488;\n      padding: 8px 16px;\n    }\n    \n    .ant-card-head-title {\n      padding: 0;\n      flex: initial;\n    }\n    \n    .ant-card-extra {\n      padding: 0;\n    }\n    \n    .ant-card-head-wrapper {\n      flex-flow: row wrap;\n      place-content: space-between;\n    }\n    \n    .ant-card-head-title {\n      font-size: 18px;\n      line-height: 40px;\n    }\n    \n    .ant-card-body {\n      padding: 16px;\n    }\n  }\n"]);return dt=function(){return e},e}var mt=Object(Je.b)(pt.a)(dt());function ft(){var e=Object(M.a)(["\n  &&& {\n    border-radius: 4px;\n    margin-bottom: 0;\n    margin-top: 0;\n    \n    &::after {\n      border-color: transparent;\n    }\n  \n    &.ant-menu-item-selected {\n      color: var(--primary-color);\n    \n      &::after {\n        border-color: transparent;\n      }\n    }\n  }\n"]);return ft=function(){return e},e}function ht(){var e=Object(M.a)(["\n  && {\n    user-select: none;\n    \n    &.ant-menu-inline .ant-menu-item:not(:last-child) {\n      margin-bottom: 0;\n    }\n  }\n"]);return ht=function(){return e},e}var yt=Object(Je.b)(Ye.a)(ht());yt.Item=Object(Je.b)(Ye.a.Item)(ft());var bt=yt,gt=n(362);function vt(){var e=Object(M.a)(["\n  && {\n        \n  }\n"]);return vt=function(){return e},e}function jt(){var e=Object(M.a)(["\n  && {\n    .ant-tabs-nav {\n      padding: 0 16px;\n      user-select: none;\n    }\n    \n    .ant-tabs-content-holder {\n      padding: 0 16px;\n    }\n  }\n"]);return jt=function(){return e},e}var xt=Object(Je.b)(gt.a)(jt());xt.TabPane=Object(Je.b)(gt.a.TabPane)(vt());var St=xt,kt=n(911);function Et(){var e=Object(M.a)(["\n  && {\n    \n  }\n"]);return Et=function(){return e},e}function Ot(){var e=Object(M.a)(["\n  && {\n    user-select: none;\n    \n    .ant-tree-node-content-wrapper.ant-tree-node-selected {\n      color: white;\n    }\n  }\n"]);return Ot=function(){return e},e}var Ct=Object(Je.b)(kt.a)(Ot());Ct.TreeNode=Object(Je.b)(kt.a.TreeNode)(Et());var _t=Ct;function wt(){var e=Object(M.a)(["\n  && {\n    background: ",";\n    border: 1px solid ",";\n    box-sizing: border-box;\n    border-radius: 2px;\n  }\n"]);return wt=function(){return e},e}var Pt={error:{border:"#FFCCC7",background:"#FFF1F0"},warning:{border:"#FFE58F",background:"#FFFBE6"},info:{border:"#91D5FF",background:"#E6F7FF"},success:{border:"#B7EB8F",background:"#F6FFED"}},Dt=Object(Je.b)(Be.a)(wt(),(function(e){return Pt[e.type||"info"].background}),(function(e){return Pt[e.type||"info"].border})),Tt=n(428);function Mt(){var e=Object(M.a)(["\n  && {\n    .ant-popover-inner-content {\n      padding: 0;\n    }\n  }\n"]);return Mt=function(){return e},e}var At=Object(Je.b)(Tt.a)(Mt()),Rt=n(929),qt=n(2296),Lt=n(371),Bt=n.n(Lt),It=n(639),Nt=n.n(It),Qt=function(e){Object(j.a)(n,e);var t=Object(x.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"componentDidMount",value:function(){Nt.a.highlightAll()}},{key:"componentDidUpdate",value:function(){Nt.a.highlightAll()}},{key:"render",value:function(){return l.a.createElement("pre",{style:this.props.style},l.a.createElement("code",{className:"language-javascript"},this.props.code))}}]),n}(l.a.Component),Ft=n(2300),Gt=n(2301),zt=n(908),Vt=function(e){var t=e.query,n=e.cubejsApi;return l.a.createElement(ge,{loadSql:!0,query:Object(_.a)(Object(_.a)({},t),{},{renewQuery:!0}),cubejsApi:n,render:function(e){var t=e.sqlQuery,n=e.resultSet;return l.a.createElement(gt.a,{defaultActiveKey:"refreshKeys",tabBarExtraContent:l.a.createElement("span",null,"Last Refresh Time:Â ",l.a.createElement("b",null,n&&n.loadResponse.lastRefreshTime))},l.a.createElement(gt.a.TabPane,{tab:"Refresh Keys",key:"refreshKeys"},l.a.createElement(zt.a,{loading:!t,pagination:!1,scroll:{x:!0},columns:[{title:"Refresh Key SQL",key:"refreshKey",render:function(e,t){return l.a.createElement(Qt,{code:Bt.a.format(t[0])})}},{title:"Value",key:"value",render:function(e,r){return l.a.createElement(Qt,{code:n&&n.loadResponse.refreshKeyValues&&JSON.stringify(n.loadResponse.refreshKeyValues[t.sqlQuery.sql.cacheKeyQueries.queries.indexOf(r)],null,2)})}}],dataSource:t&&t.sqlQuery.sql&&t.sqlQuery.sql.cacheKeyQueries.queries})),l.a.createElement(gt.a.TabPane,{tab:"Pre-aggregations",key:"preAggregations"},l.a.createElement(zt.a,{loading:!t,pagination:!1,scroll:{x:!0},columns:[{title:"Table Name",key:"tableName",dataIndex:"tableName",render:function(e){return l.a.createElement("b",null,e)}},{title:"Refresh Key SQL",key:"refreshKey",dataIndex:"invalidateKeyQueries",render:function(e){return e.map((function(e){return l.a.createElement(Qt,{key:e[0],code:Bt.a.format(e[0])})}))}},{title:"Refresh Key Value",key:"value",render:function(e,t){return n&&n.loadResponse.usedPreAggregations&&n.loadResponse.usedPreAggregations[t.tableName].refreshKeyValues&&n.loadResponse.usedPreAggregations[t.tableName].refreshKeyValues.map((function(e){return l.a.createElement(Qt,{key:JSON.stringify(e),code:JSON.stringify(e,null,2)})}))}}],dataSource:t&&t.sqlQuery.sql&&t.sqlQuery.sql.preAggregations})),l.a.createElement(gt.a.TabPane,{tab:"Rollup Match Results",key:"rollupMatchResults"},l.a.createElement(zt.a,{loading:!t,pagination:!1,scroll:{x:!0},columns:[{title:"Rollup Table Name",key:"tableName",dataIndex:"tableName",render:function(e){return l.a.createElement("b",null,e)}},{title:"Rollup Definition",key:"rollup",dataIndex:"references",render:function(e){return l.a.createElement(Qt,{code:JSON.stringify(e,null,2)})}},{title:"Can Be Used",key:"canUsePreAggregation",dataIndex:"canUsePreAggregation",render:function(e){return e?l.a.createElement(Ft.a,{style:{color:"#52c41a",fontSize:"2em"}}):l.a.createElement(Gt.a,{style:{color:"#c2371b",fontSize:"2em"}})}}],dataSource:t&&t.sqlQuery.sql&&t.sqlQuery.sql.rollupMatchResults})))}})},Ut=n(488),Yt=n.n(Ut),Kt=n(640),Ht=n.n(Kt),Wt=null,Jt=[],$t={},Xt=function(){var e=Object(b.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yt()("playground_anonymous")||Yt()("playground_anonymous",Ht()()),Jt.push(Object(_.a)(Object(_.a)(Object(_.a)({},$t),t),{},{id:Ht()(),clientAnonymousId:Yt()("playground_anonymous"),clientTimestamp:(new Date).toJSON()})),n=function(){var e=Object(b.a)(y.a.mark((function e(t,r){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t||(t=Jt,Jt=[]),t.length){e.next=3;break}return e.abrupt("return",null);case 3:return null==r&&(r=10),e.prev=4,a=(new Date).toJSON(),e.next=8,Object(S.a)("https://track.cube.dev/track",{method:"post",body:JSON.stringify(t.map((function(e){return Object(_.a)(Object(_.a)({},e),{},{sentAt:a})}))),headers:{"Content-Type":"application/json"}});case 8:if(!(200!==e.sent.status&&r>0)){e.next=11;break}return e.abrupt("return",n(t,r-1));case 11:e.next=17;break;case 13:if(e.prev=13,e.t0=e.catch(4),!(r>0)){e.next=17;break}return e.abrupt("return",n(t,r-1));case 17:return e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t,n){return e.apply(this,arguments)}}(),r=(Wt||Promise.resolve()).then((function(){return n()})).then((function(){r===Wt&&(Wt=null)})),Wt=r,e.abrupt("return",Wt);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Zt=function(e,t){Xt(Object(_.a)({event:e},t))},en=function(e,t){Zt("Playground Action",Object(_.a)({name:e},t))};function tn(){var e=Object(M.a)(["\n  .ant-card-head {\n    position: sticky;\n    top: 0;\n    z-index: 100;\n    background: white;\n  }\n  \n  .ant-card-body {\n    max-width: 100%;\n    overflow: auto;\n  }\n"]);return tn=function(){return e},e}var nn=Object(Je.b)(mt)(tn()),rn=[{id:"vanilla",title:"Vanilla JavaScript",docsLink:"https://cube.dev/docs/@cubejs-client-core"},{id:"react",title:"React",supported:!0,scaffoldingSupported:!0},{id:"angular",title:"Angular",docsLink:"https://cube.dev/docs/@cubejs-client-ngx",scaffoldingSupported:!0},{id:"vue",title:"Vue.js",docsLink:"https://cube.dev/docs/@cubejs-client-vue"}],an=function(e){Object(j.a)(r,e);var t,n=Object(x.a)(r);function r(e){var t;return Object(g.a)(this,r),(t=n.call(this,e)).state={showCode:!1,framework:"react"},t}return Object(v.a)(r,[{key:"componentDidMount",value:(t=Object(b.a)(y.a.mark((function e(){var t,n,r,a,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.codeSandboxSource,r=t.dependencies,e.next=3,Object(S.a)("https://codesandbox.io/api/v1/sandboxes/define?json=1",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(this.codeSandboxDefinition(n,r))});case 3:return a=e.sent,e.next=6,a.json();case 6:i=e.sent,this.setState({sandboxId:i.sandbox_id});case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"codeSandboxDefinition",value:function(e,t){return{files:Object(_.a)(Object(_.a)({},"string"==typeof e?{"index.js":{content:e}}:e),{},{"package.json":{content:{dependencies:Object(_.a)({"react-dom":"latest"},Object(qt.a)((function(){return"latest"}),t))}}}),template:"create-react-app"}}},{key:"render",value:function(){var e=this,t=this.state,n=t.redirectToDashboard,r=t.showCode,a=t.sandboxId,i=t.addingToDashboard,o=t.framework,s=this.props,c=s.resultSet,u=s.error,p=s.codeExample,d=s.render,f=s.codeSandboxSource,h=s.dependencies,g=s.dashboardSource,v=s.hideActions,j=s.query,x=s.cubejsApi,S=s.chartLibrary,k=s.setChartLibrary,E=s.chartLibraries,O=s.history;if(n)return l.a.createElement(m.a,{to:"/dashboard"});var C,_=Object(Rt.getParameters)(this.codeSandboxDefinition(f,h)),w=l.a.createElement(Ye.a,{onClick:function(e){en("Set Chart Library",{chartLibrary:e.key}),k(e.key)}},E.map((function(e){return l.a.createElement(Ye.a.Item,{key:e.value},e.title)}))),P=l.a.createElement(Ye.a,{onClick:function(t){en("Set Framework",{framework:t.key}),e.setState({framework:t.key})}},rn.map((function(e){return l.a.createElement(Ye.a.Item,{key:e.id},e.title)}))),D=E.find((function(e){return e.value===S})),T=rn.find((function(e){return e.id===o})),M=l.a.createElement("form",{action:"https://codesandbox.io/api/v1/sandboxes/define",method:"POST",target:"_blank"},l.a.createElement("input",{type:"hidden",name:"parameters",value:_}),l.a.createElement(it,null,l.a.createElement(tt.Group,null,l.a.createElement(Ke.a,{overlay:P},l.a.createElement(tt,{size:"small"},T&&T.title,l.a.createElement(Ie.a,null))),l.a.createElement(Ke.a,{overlay:w,disabled:!T.supported},l.a.createElement(tt,{size:"small"},D&&D.title,l.a.createElement(Ie.a,null)))),l.a.createElement(tt.Group,null,l.a.createElement(tt,{onClick:function(){en("Show Chart"),e.setState({showCode:null})},size:"small",type:r?"default":"primary",disabled:!T.supported},"Chart"),l.a.createElement(tt,{onClick:function(){en("Show Query"),e.setState({showCode:"query"})},icon:l.a.createElement(Ne.a,null),size:"small",type:"query"===r?"primary":"default",disabled:!T.supported},"JSON Query"),l.a.createElement(tt,{onClick:function(){en("Show Code"),e.setState({showCode:"code"})},icon:l.a.createElement(Qe.a,null),size:"small",type:"code"===r?"primary":"default",disabled:!T.supported},"Code"),l.a.createElement(tt,{onClick:function(){en("Show SQL"),e.setState({showCode:"sql"})},icon:l.a.createElement(Fe.a,null),size:"small",type:"sql"===r?"primary":"default",disabled:!T.supported},"SQL"),l.a.createElement(tt,{onClick:function(){en("Show Cache"),e.setState({showCode:"cache"})},icon:l.a.createElement(Ge.a,null),size:"small",type:"cache"===r?"primary":"default",disabled:!T.supported},"Cache")),l.a.createElement(tt,{icon:l.a.createElement(ze.a,null),size:"small",onClick:function(){return en("Open Code Sandbox")},htmlType:"submit",disabled:!T.supported},"Edit"),g&&l.a.createElement(tt,{onClick:Object(b.a)(y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({addingToDashboard:!0}),t.next=3,g.canAddChart();case 3:if("boolean"!=typeof(n=t.sent)||!n){t.next=11;break}return en("Add to Dashboard"),t.next=8,g.addChart(p);case 8:e.setState({redirectToDashboard:!0,addingToDashboard:!1}),t.next=12;break;case 11:n?(e.setState({addingToDashboard:!1}),He.a.error({title:"There is an error loading your dashboard app",content:n,okText:"Fix",okCancel:!0,onOk(){O.push("/dashboard")}})):(e.setState({addingToDashboard:!1}),He.a.error({title:"Your dashboard app does not support adding of static charts",content:"Please use static dashboard template"}));case 12:case"end":return t.stop()}}),t)}))),icon:l.a.createElement(Ve.a,null),size:"small",loading:i,disabled:!T.supported,type:"primary"},i?"Preparing dashboard app. It may take a while. Please check console for progress...":"Add to Dashboard"))),A=JSON.stringify(j,null,2),R=function(){var e=Object(b.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return navigator.clipboard||We.a.error({message:"Your browser doesn't support copy to clipboard"}),e.prev=1,e.next=4,navigator.clipboard.writeText("query"===r?A:p);case 4:We.a.success({message:"Copied to clipboard"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),We.a.error({message:"Can't copy to clipboard",description:e.t0});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();return C="code"===r?l.a.createElement(it,null,l.a.createElement("div",null,"Query"),l.a.createElement(tt,{icon:l.a.createElement(Ue.a,null),size:"small",onClick:function(){R(),en("Copy Code to Clipboard")},type:"primary"},"Copy to Clipboard")):"query"===r?l.a.createElement(it,null,l.a.createElement("div",null,"Query"),l.a.createElement(tt,{icon:l.a.createElement(Ue.a,null),size:"small",onClick:function(){R(),en("Copy Query to Clipboard")},type:"primary"},"Copy to Clipboard")):"sql"===r?"SQL":"Chart",v?d({resultSet:c,error:u,sandboxId:a}):l.a.createElement(nn,{title:C,style:{minHeight:420},extra:M},(null==T?void 0:T.supported)?"code"===r?l.a.createElement(Qt,{code:p}):"query"===r?l.a.createElement(Qt,{code:A}):"sql"===r?l.a.createElement(ge,{loadSql:"only",query:j,cubejsApi:x,render:function(e){var t=e.sqlQuery,n=Array.isArray(t)?t:[t],r=Object(De.a)(n,1)[0];return l.a.createElement(Qt,{code:r&&Bt.a.format(r.sql())})}}):"cache"===r?l.a.createElement(Vt,{query:j,cubejsApi:x}):d({resultSet:c,error:u,sandboxId:a}):l.a.createElement("h2",{style:{padding:24,textAlign:"center"}},"We do not supportÂ ",T.title,"Â code generation here yet.",l.a.createElement("br",null),"Please refer toÂ ",l.a.createElement("a",{href:T.docsLink,target:"_blank",rel:"noopener noreferrer",onClick:function(){return en("Unsupported Framework Docs",{framework:o})}},T.title,"Â docs"),"Â to see on how to use it with Cube.js."))}}]),r}(l.a.Component);an.defaultProps={query:{},cubejsApi:null,hideActions:null,dashboardSource:null,codeSandboxSource:null,codeExample:null,error:null,resultSet:null};var on=Object(m.f)(an),sn=n(937),cn={line:'\n  <Chart scale={{ x: { tickCount: 8 } }} height={400} data={stackedChartData(resultSet)} forceFit>\n    <Axis name="x" />\n    <Axis name="measure" />\n    <Tooltip crosshairs={{type : \'y\'}} />\n    <Geom type="line" position={`x*measure`} size={2} color="color" />\n  </Chart>',bar:'\n  <Chart scale={{ x: { tickCount: 8 } }} height={400} data={stackedChartData(resultSet)} forceFit>\n    <Axis name="x" />\n    <Axis name="measure" />\n    <Tooltip />\n    <Geom type="intervalStack" position={`x*measure`} color="color" />\n  </Chart>',area:'\n  <Chart scale={{ x: { tickCount: 8 } }} height={400} data={stackedChartData(resultSet)} forceFit>\n    <Axis name="x" />\n    <Axis name="measure" />\n    <Tooltip crosshairs={{type : \'y\'}} />\n    <Geom type="areaStack" position={`x*measure`} size={2} color="color" />\n  </Chart>',pie:"\n  <Chart height={400} data={resultSet.chartPivot()} forceFit>\n    <Coord type='theta' radius={0.75} />\n    {resultSet.seriesNames().map(s => (<Axis name={s.key} />))}\n    <Legend position='right' />\n    <Tooltip />\n    {resultSet.seriesNames().map(s => (<Geom type=\"intervalStack\" position={s.key} color=\"category\" />))}\n  </Chart>"},un=function(e){var t=e.chartType,n=e.renderFnName;return"import { Chart, Axis, Tooltip, Geom, Coord, Legend } from 'bizcharts';\n\nconst stackedChartData = (resultSet) => {\n  const data = resultSet.pivot().map(\n    ({ xValues, yValuesArray }) =>\n      yValuesArray.map(([yValues, m]) => ({\n        x: resultSet.axisValuesString(xValues, ', '),\n        color: resultSet.axisValuesString(yValues, ', '),\n        measure: m && Number.parseFloat(m)\n      }))\n  ).reduce((a, b) => a.concat(b), []);\n\n  return data;\n}\n\nconst ".concat(n," = ({ resultSet }) => (").concat(cn[t],"\n);")},ln={bizcharts:sn},pn=n(977),dn={line:'\n  <CartesianChart resultSet={resultSet} ChartComponent={LineChart}>\n      {resultSet.seriesNames().map((series, i) => (\n        <Line\n          key={series.key}\n          stackId="a"\n          dataKey={series.key}\n          name={series.title}\n          stroke={colors[i]}\n        />\n      ))}\n  </CartesianChart>',bar:'\n  <CartesianChart resultSet={resultSet} ChartComponent={BarChart}>\n    {resultSet.seriesNames().map((series, i) => (\n      <Bar\n        key={series.key}\n        stackId="a"\n        dataKey={series.key}\n        name={series.title}\n        fill={colors[i]}\n      />\n    ))}\n  </CartesianChart>',area:'\n  <CartesianChart resultSet={resultSet} ChartComponent={AreaChart}>\n      {resultSet.seriesNames().map((series, i) => (\n        <Area\n          key={series.key}  \n          stackId="a"\n          dataKey={series.key}\n          name={series.title}\n          stroke={colors[i]}\n          fill={colors[i]}\n        />\n      ))}\n  </CartesianChart>',pie:'\n  <ResponsiveContainer width="100%" height={350}>\n    <PieChart>\n      <Pie\n        isAnimationActive={false}\n        data={resultSet.chartPivot()}\n        nameKey="x"\n        dataKey={resultSet.seriesNames()[0].key}\n        fill="#8884d8"\n      >\n      {\n        resultSet.chartPivot().map((e, index) =>\n          <Cell key={index} fill={colors[index % colors.length]}/>\n        )\n      }\n      </Pie>\n      <Legend />\n      <Tooltip />\n    </PieChart>\n  </ResponsiveContainer>'},mn=function(e){var t=e.chartType,n=e.renderFnName;return"import {\n  CartesianGrid,\n  PieChart,\n  Pie,\n  Cell,\n  AreaChart,\n  Area,\n  XAxis,\n  YAxis,\n  Tooltip,\n  ResponsiveContainer,\n  Legend,\n  BarChart,\n  Bar,\n  LineChart,\n  Line\n} from \"recharts\";\n\nconst CartesianChart = ({ resultSet, children, ChartComponent }) => (\n  <ResponsiveContainer width=\"100%\" height={350}>\n    <ChartComponent data={resultSet.chartPivot()}>\n      <XAxis dataKey=\"x\" />\n      <YAxis />\n      <CartesianGrid />\n      { children }\n      <Legend />\n      <Tooltip />\n    </ChartComponent>\n  </ResponsiveContainer>\n)\n\nconst colors = ['#FF6492', '#141446', '#7A77FF'];\n\nconst ".concat(n," = ({ resultSet }) => (").concat(dn[t],"\n);")},fn={recharts:pn},hn=n(948),yn={line:"\n  const data = {\n    labels: resultSet.categories().map(c => c.category),\n    datasets: resultSet.series().map((s, index) => (\n      {\n        label: s.title,\n        data: s.series.map(r => r.value),\n        borderColor: COLORS_SERIES[index],\n        fill: false\n      }\n    )),\n  };\n  const options = {};\n  return <Line data={data} options={options} />;",bar:"\n  const data = {\n    labels: resultSet.categories().map(c => c.category),\n    datasets: resultSet.series().map((s, index) => (\n      {\n        label: s.title,\n        data: s.series.map(r => r.value),\n        backgroundColor: COLORS_SERIES[index],\n        fill: false\n      }\n    )),\n  };\n  const options = {\n    scales: { xAxes: [{ stacked: true }] }\n  };\n  return <Bar data={data} options={options} />;",area:"\n  const data = {\n    labels: resultSet.categories().map(c => c.category),\n    datasets: resultSet.series().map((s, index) => (\n      {\n        label: s.title,\n        data: s.series.map(r => r.value),\n        backgroundColor: COLORS_SERIES[index]\n      }\n    )),\n  };\n  const options = {\n    scales: { yAxes: [{ stacked: true }] }\n  };\n  return <Line data={data} options={options} />;",pie:"\n  const data = {\n    labels: resultSet.categories().map(c => c.category),\n    datasets: resultSet.series().map(s => (\n      {\n        label: s.title,\n        data: s.series.map(r => r.value),\n        backgroundColor: COLORS_SERIES,\n        hoverBackgroundColor: COLORS_SERIES,\n      }\n    ))\n  };\n  const options = {};\n  return <Pie data={data} options={options} />;"},bn=function(e){var t=e.chartType,n=e.renderFnName;return"import { Line, Bar, Pie } from 'react-chartjs-2';\n\nconst COLORS_SERIES = ['#FF6492', '#141446', '#7A77FF'];\n\nconst ".concat(n," = ({ resultSet }) => {").concat(yn[t],"\n};")},gn={"react-chartjs-2":hn},vn=n(976),jn=function(e){return"// Add Y axis\n  const y = d3.scaleLinear()\n    .domain([0, ".concat(e,'])\n    .range([ height, 0 ]);\n  svg.append("g")\n    .call(d3.axisLeft(y));')},xn='// Add X axis\n  const x = d3.scaleTime()\n    .domain(d3.extent(resultSet.chartPivot(), c => d3.isoParse(c.x)))\n    .range([ 0, width ]);\n  svg.append("g")\n    .attr("transform", "translate(0," + height + ")")\n    .call(d3.axisBottom(x));',Sn="// Transform data into D3 format\n  const keys = resultSet.seriesNames().map(s => s.key)\n  const data = d3.stack()\n    .keys(keys)\n    (resultSet.chartPivot())\n\n  // Color palette\n  const color = d3.scaleOrdinal()\n    .domain(keys)\n    .range(COLORS_SERIES)",kn={line:"\n  // Prepare data in D3 format\n  const data = resultSet.series().map((series) => ({\n    key: series.title, values: series.series\n  }));\n\n  // color palette\n  const color = d3.scaleOrdinal()\n    .domain(data.map(d => d.key ))\n    .range(COLORS_SERIES)\n\n  ".concat(xn,"\n\n  ").concat(jn("d3.max(data.map((s) => d3.max(s.values, (i) => i.value)))"),'\n\n  // Draw the lines\n  svg.selectAll(".line")\n    .data(data)\n    .enter()\n    .append("path")\n      .attr("fill", "none")\n      .attr("stroke", d => color(d.key))\n      .attr("stroke-width", 1.5)\n      .attr("d", (d) => {\n        return d3.line()\n          .x(d => x(d3.isoParse(d.x)))\n          .y(d => y(+d.value))\n          (d.values)\n      })\n  '),bar:"\n  ".concat(Sn,'\n\n  // Add X axis\n  const x = d3.scaleBand()\n    .range([ 0, width ])\n    .domain(resultSet.chartPivot().map(c => c.x))\n    .padding(0.3);\n  svg.append("g")\n    .attr("transform", "translate(0," + height + ")")\n    .call(d3.axisBottom(x))\n\n  ').concat(jn("d3.max(data.map((s) => d3.max(s, (i) => i[1])))"),'\n\n  // Add the bars\n  svg.append("g")\n    .selectAll("g")\n    // Enter in the stack data = loop key per key = group per group\n    .data(data)\n    .enter().append("g")\n      .attr("fill", d => color(d.key))\n      .selectAll("rect")\n      // enter a second time = loop subgroup per subgroup to add all rectangles\n      .data(d => d)\n      .enter().append("rect")\n        .attr("x", d => x(d.data.x))\n        .attr("y", d => y(d[1]))\n        .attr("height", d => y(d[0]) - y(d[1]))\n        .attr("width",x.bandwidth())\n    '),area:"\n  ".concat(Sn,"\n\n  ").concat(xn,"\n\n  ").concat(jn("d3.max(data.map((s) => d3.max(s, (i) => i[1])))"),'\n\n  // Add the areas\n  svg\n  .selectAll("mylayers")\n  .data(data)\n  .enter().append("path")\n    .style("fill", d => color(d.key))\n    .attr("d", d3.area()\n      .x(d => x(d3.isoParse(d.data.x)))\n      .y0(d => y(d[0]))\n      .y1(d => y(d[1]))\n  )\n  '),pie:"const data = resultSet.series()[0].series.map(s => s.value);\n  const data_ready = d3.pie()(data);\n\n  // The radius of the pieplot is half the width or half the height (smallest one).\n  const radius = Math.min(400, 400) / 2 - 40;\n\n  // Seprate container to center align pie chart\n  const pieContainer = svg.attr('height', height)\n      .append('g')\n      .attr('transform', 'translate(' + width/2 +  ',' + height/2 +')');\n\n  pieContainer\n    .selectAll('pieArcs')\n    .data(data_ready)\n    .enter()\n    .append('path')\n    .attr('d', d3.arc()\n      .innerRadius(0)\n      .outerRadius(radius)\n    )\n    .attr('fill', d => COLORS_SERIES[d.index])\n  "},En=function(e){var t=e.chartType,n=e.renderFnName;return"\nimport * as d3 from 'd3';\nconst COLORS_SERIES = ['#FF6492', '#141446', '#7A77FF'];\n\nconst draw = (node, resultSet, chartType) => {\n  ".concat('// Set the dimensions and margins of the graph\n  const margin = {top: 10, right: 30, bottom: 30, left: 60},\n    width = node.clientWidth - margin.left - margin.right,\n    height = 400 - margin.top - margin.bottom;\n\n  d3.select(node).html("");\n  const svg = d3.select(node)\n  .append("svg")\n    .attr("width", width + margin.left + margin.right)\n    .attr("height", height + margin.top + margin.bottom)\n  .append("g")\n    .attr("transform",\n          "translate(" + margin.left + "," + margin.top + ")");',"\n  ").concat(kn[t],"\n}\n\nconst ").concat(n," = ({ resultSet }) => (\n  <div ref={el => el && draw(el, resultSet, '").concat(t,"')} />\n)\n")},On={d3:vn},Cn={number:'\n  <Row type="flex" justify="center" align="middle" style={{ height: \'100%\' }}>\n    <Col>\n      {resultSet\n        .seriesNames()\n        .map(s => (\n          <Statistic value={resultSet.totalRow()[s.key]} />\n        ))}\n    </Col>\n  </Row>\n  ',table:"  \n  <Table \n    pagination={false}\n    columns={resultSet.tableColumns(pivotConfig)} \n    dataSource={resultSet.tablePivot(pivotConfig)} \n  />\n  "},_n=function(e){var t=e.chartType,n=e.renderFnName;return"import { Row, Col, Statistic, Table } from 'antd';\n\nconst ".concat(n," = ({ resultSet, pivotConfig }) => (").concat(Cn[t],"\n);")},wn={},Pn={chartjs:{library:o,title:"Chart.js"},recharts:{library:i,title:"Recharts"},bizcharts:{library:a,title:"Bizcharts"},d3:{library:s,title:"D3"},ng2:{library:null,title:"ng2-charts"}},Dn={presets:[Ae.a,qe.a]},Tn=function(e){var t=e;return"object"==typeof e&&(t=JSON.stringify(e,null,2)),t.split("\n").map((function(e,t){return t>0?"  ".concat(e):e})).join("\n")},Mn=function(e){var t=e.chartLibrary,n=e.apiUrl,r=e.query,a=e.cubejsToken,i=e.chartType,o=e.codeExample,s=e.pivotConfig,c="".concat(i,"Render");return"import React from 'react';\nimport cubejs from '@cubejs-client/core';\nimport { QueryRenderer } from '@cubejs-client/react';\nimport { Spin } from 'antd';\n".concat(t.sourceCodeTemplate(Object(_.a)(Object(_.a)({},e),{},{renderFnName:c})),"\n").concat(o?"":"import CubeJsQueryRenderer from 'cubejs-context';\n",'\nconst API_URL = "').concat(n,'"; // change to your actual endpoint\n\nconst cubejsApi = cubejs(\n  "').concat(a,'",\n  { apiUrl: API_URL + "/cubejs-api/v1" }\n);\n\nconst renderChart = (Component, pivotConfig) => ({ resultSet, error }) => {\n  return (\n    (resultSet && (\n      <Component\n        resultSet={resultSet}\n        pivotConfig={pivotConfig}\n      />\n    )) ||\n    (error && error.toString()) || <Spin />\n  );\n};\n\nconst ChartRenderer = () => {\n  ').concat(o?"":"const { query, pivotConfig } = React.useContext(CubeJsQueryRenderer);","\n  return (\n    <QueryRenderer\n      query={").concat(o?Tn(r):"query","}\n      cubejsApi={cubejsApi}\n      render={renderChart(\n        ").concat(c,",\n        ").concat(o?Tn(s):"pivotConfig","\n      )}\n    />\n  );\n};\n\nexport default ChartRenderer;\n")},An=function(e){return"import ReactDOM from 'react-dom';\nimport \"antd/dist/antd.css\";\n".concat(e,'\n\nconst rootElement = document.getElementById("root");\nReactDOM.render(<ChartRenderer />, rootElement);\n')},Rn=Object.keys(Pn).map((function(e){return{value:e,title:Pn[e].title}})),qn=Object(u.createContext)({}),Ln=function(e){var t=Object(u.useState)(null),n=Object(De.a)(t,2),a=n[0],i=n[1],o=Object(u.useState)("bizcharts"),s=Object(De.a)(o,2),p=s[0],d=s[1],m=e.query,f=e.resultSet,h=e.error,y=e.sqlQuery,b=e.dashboardSource,g=e.cubejsApi,v=e.chartType,j=e.sourceCodeFn,x=e.pivotConfig,S=j||Mn,k=function(e,t){return-1!==["table","number"].indexOf(e)?c:Pn[t].library}(v,p),E=S(Object(_.a)(Object(_.a)({},e),{},{chartLibrary:k,pivotConfig:x})),O=S(Object(_.a)(Object(_.a)({},e),{},{chartLibrary:k,pivotConfig:x,codeExample:!0})),w=Object(_.a)({"@cubejs-client/core":C.a,"@cubejs-client/react":r,antd:Le,react:l.a},k.imports),P=Object(_.a)(Object(_.a)({},w),{},{"cubejs-context":qn});return Object(u.useEffect)((function(){a&&i(null)}),[E,v,a]),l.a.createElement(qn.Provider,{value:{query:m,pivotConfig:x}},l.a.createElement(on,{query:m,resultSet:f,error:h,sqlQuery:y,codeExample:O,codeSandboxSource:An(O),dependencies:w,dashboardSource:b,chartLibrary:p,setChartLibrary:d,chartLibraries:Rn,cubejsApi:g,render:function(){return a?l.a.createElement(Be.a,{message:"Error occurred while compiling JS",description:l.a.createElement("pre",null,a.toString()),type:"error"}):l.a.createElement(Te.a,{onRender:function(e){e&&i(e)},babelConfig:Dn,resolver:function(e){return P[e]},source:E})}}))};Ln.defaultProps={resultSet:null,error:null,sqlQuery:null,dashboardSource:null,cubejsApi:null,chartType:null,sourceCodeFn:null};var Bn=function(e){var t=e.overlay,n=Object(w.a)(e,["overlay"]);return l.a.createElement(Ke.a,{overlay:t,placement:"bottomLeft",trigger:["click"]},l.a.createElement(tt,n))};function In(){var e=Object(M.a)(["\n  max-height: 320px;\n  overflow: hidden auto;\n"]);return In=function(){return e},e}var Nn=Object(Je.b)(Ye.a)(In()),Qn=function(e,t){return l.a.createElement(Nn,null,t.length?t.map((function(t){return l.a.createElement(Nn.Item,{key:t.name,onClick:function(){return e(t)}},t.title)})):l.a.createElement(Nn.Item,{disabled:!0},"No members found"))},Fn=function(e){var t=e.onClick,n=e.availableMembers,r=Object(w.a)(e,["onClick","availableMembers"]);return l.a.createElement(Bn,Object.assign({overlay:Qn(t,n)},r))};function Gn(){var e=Object(M.a)(["\n  && {\n    border: 1px solid var(--primary-color);\n    color: var(--primary-color);\n    border-radius: calc(var(--border-radius-base) + 1px);\n  \n    .ant-btn {\n      background-color: var(--primary-9);\n      color: var(--primary-color);\n      border: none;\n      \n      span {\n        color: var(--primary-color);\n      }\n      \n      &:hover {\n        background-color: var(--primary-8);\n        border: none;\n        box-shadow: none;\n      }\n      \n      & + .ant-btn {\n        margin-left: 0;\n      }\n    }\n\n    .remove-btn {\n      background-color: white !important;    \n      color: var(--primary-color);\n      padding: 8px;\n      \n      &:hover {\n        background-color: var(--remove-btn-hover-bg) !important;\n      }\n      \n      .anticon {\n        height: 14px;\n        display: block;\n        vertical-align: initial;\n      }\n    }\n  }\n"]);return Gn=function(){return e},e}var zn=Object(Je.b)((function(e){var t=e.onRemoveClick,n=e.children,r=Object(w.a)(e,["onRemoveClick","children"]);return l.a.createElement(tt.Group,r,n,l.a.createElement(tt,{ghost:!0,onClick:t,className:"remove-btn"},l.a.createElement(Gt.a,null)))}))(Gn()),Vn=function(e){var t=e.members,n=e.availableMembers,r=e.addMemberName,a=e.updateMethods;return l.a.createElement(it,null,t.map((function(e){return l.a.createElement(zn,{key:e.index||e.name,onRemoveClick:function(){return a.remove(e)}},l.a.createElement(Fn,{availableMembers:n,onClick:function(t){return a.update(e,t)}},e.title))})),l.a.createElement(Fn,{onClick:function(e){return a.add(e)},availableMembers:n,type:"dashed",icon:l.a.createElement(Ve.a,null)},t.length?null:r))},Un=n(1),Yn={string:function(e){var t=e.values,n=e.onChange;return l.a.createElement(ct,{key:"input",style:{width:300},mode:"tags",onChange:n,value:t})},number:function(e){var t=e.values,n=e.onChange;return l.a.createElement(ut.a,{key:"input",style:{width:300},onChange:function(e){return n([e.target.value])},value:t&&t[0]||""})}};Yn.string.propTypes={values:Un.array,onChange:Un.func.isRequired},Yn.string.defaultProps={values:[]},Yn.number.propTypes={values:Un.array,onChange:Un.func.isRequired},Yn.number.defaultProps={values:[]};var Kn=function(e){var t=e.member,n=e.updateMethods,r=Yn[t.dimension.type]||Yn.string;return l.a.createElement(r,{key:"filter",values:t.values,onChange:function(e){return n.update(t,Object(_.a)(Object(_.a)({},t),{},{values:e}))}})},Hn=function(e){var t=e.members,n=e.availableMembers,r=e.addMemberName,a=e.updateMethods;return l.a.createElement(it,null,t.map((function(e){return l.a.createElement(u.Fragment,{key:e.index},l.a.createElement(zn,{onRemoveClick:function(){return a.remove(e)}},l.a.createElement(Fn,{onClick:function(t){return a.update(e,Object(_.a)(Object(_.a)({},e),{},{dimension:t}))},availableMembers:n,style:{width:150,textOverflow:"ellipsis",overflow:"hidden"}},e.dimension.title)),l.a.createElement(ct,{value:e.operator,onChange:function(t){return a.update(e,Object(_.a)(Object(_.a)({},e),{},{operator:t}))},style:{width:200}},e.operators.map((function(e){return l.a.createElement(ct.Option,{key:e.name,value:e.name},e.title)}))),l.a.createElement(Kn,{member:e,key:"filterInput",updateMethods:a}))})),l.a.createElement(Fn,{onClick:function(e){return a.add({dimension:e})},availableMembers:n,type:"dashed",icon:l.a.createElement(Ve.a,null)},t.length?null:r))},Wn=n(363),Jn=n(189),$n=n.n(Jn);function Xn(){var e=Object(M.a)(["\n  color: var(--dark-03-color);\n  line-height: 32px;\n"]);return Xn=function(){return e},e}var Zn=Je.b.div(Xn()),er=Wn.a.RangePicker,tr=[{title:"Custom",value:"custom"},{title:"All time",value:void 0},{value:"Today"},{value:"Yesterday"},{value:"This week"},{value:"This month"},{value:"This quarter"},{value:"This year"},{value:"Last 7 days"},{value:"Last 30 days"},{value:"Last week"},{value:"Last month"},{value:"Last quarter"},{value:"Last year"}],nr=function(e){var t,n=e.members,r=void 0===n?[]:n,a=e.availableMembers,i=e.addMemberName,o=e.updateMethods,s=e.parsedDateRange,c=Array.isArray(null===(t=r[0])||void 0===t?void 0:t.dateRange),p=Object(u.useState)(!1),d=Object(De.a)(p,2),m=d[0],f=d[1];return l.a.createElement(it,null,r.map((function(e,t){return l.a.createElement(u.Fragment,{key:t},l.a.createElement(zn,{onRemoveClick:function(){return o.remove(e)}},l.a.createElement(Fn,{onClick:function(t){return o.update(e,Object(_.a)(Object(_.a)({},e),{},{dimension:t}))},availableMembers:a},e.dimension.title)),l.a.createElement(Zn,null,"for"),l.a.createElement(Bn,{overlay:(i=function(t){"custom"===t.value?f(!0):(o.update(e,Object(_.a)(Object(_.a)({},e),{},{dateRange:t.value})),f(!1))},l.a.createElement(Ye.a,null,tr.map((function(e){return l.a.createElement(Ye.a.Item,{key:e.title||e.value,onClick:function(){return i(e)}},e.title||e.value)}))))},m||c?"Custom":e.dateRange||"All time"),m||c?l.a.createElement(er,{format:"YYYY-MM-DD",defaultValue:(s||[]).map((function(e){return $n()(e)})),onChange:function(t){return function(e,t){t&&!t.some((function(e){return!e}))&&o.update(e,Object(_.a)(Object(_.a)({},e),{},{dateRange:t.map((function(e){return e.format("YYYY-MM-DD")}))}))}(e,t)}}):null,l.a.createElement(Zn,null,"by"),l.a.createElement(Bn,{overlay:(n=e.dimension,r=function(t){return o.update(e,Object(_.a)(Object(_.a)({},e),{},{granularity:t.name}))},l.a.createElement(Ye.a,null,n.granularities.length?n.granularities.map((function(e){return l.a.createElement(Ye.a.Item,{key:e.title,onClick:function(){return r(e)}},e.title)})):l.a.createElement(Ye.a.Item,{disabled:!0},"No members found")))},e.dimension.granularities.find((function(t){return t.name===e.granularity}))&&e.dimension.granularities.find((function(t){return t.name===e.granularity})).title));var n,r,i})),!r.length&&l.a.createElement(Fn,{availableMembers:a,type:"dashed",icon:l.a.createElement(Ve.a,null),onClick:function(e){return o.add({dimension:e,granularity:"day"})}},i))},rr=n(2310),ar=n(2311),ir=n(2312),or=n(2313),sr=n(2314),cr=n(2315),ur=[{name:"line",title:"Line",icon:l.a.createElement(rr.a,null)},{name:"area",title:"Area",icon:l.a.createElement(ar.a,null)},{name:"bar",title:"Bar",icon:l.a.createElement(ir.a,null)},{name:"pie",title:"Pie",icon:l.a.createElement(or.a,null)},{name:"table",title:"Table",icon:l.a.createElement(sr.a,null)},{name:"number",title:"Number",icon:l.a.createElement(cr.a,null)}],lr=function(e){var t=e.chartType,n=e.updateChartType,r=l.a.createElement(Ye.a,null,ur.map((function(e){return l.a.createElement(Ye.a.Item,{key:e.title,onClick:function(){return n(e.name)}},e.icon," ",e.title)}))),a=ur.find((function(e){return e.name===t}));return l.a.createElement(Bn,{overlay:r,icon:a.icon,style:{border:0}},a.title)},pr=n(881),dr=n(166),mr=n(909),fr=n(2316);function hr(e){var t=e.id,n=e.index;return l.a.createElement(dr.b,{draggableId:t,index:n},(function(e){var n=e.draggableProps,r=e.dragHandleProps,a=e.innerRef;return l.a.createElement("div",Object.assign({ref:a},n,r,{style:Object(_.a)(Object(_.a)({},n.style),{},{border:"1px dashed var(--dark-05-color)",borderRadius:4,padding:"5px 12px",lineHeight:"22px"})}),l.a.createElement(mr.a.Text,{ellipsis:!0,style:{maxWidth:"100%"}},l.a.createElement(fr.a,{style:{marginRight:8}}),t))}))}function yr(e){var t=e.pivotConfig,n=e.axis;return l.a.createElement(l.a.Fragment,null,l.a.createElement(mr.a.Text,{strong:!0,style:{display:"flex",justifyContent:"center",padding:"8px 16px",background:"var(--light-5)",borderBottom:"1px solid var(--light-color)"}},n),l.a.createElement("div",{style:{padding:"8px"}},l.a.createElement(dr.c,{droppableId:n},(function(e){return l.a.createElement("div",Object.assign({ref:e.innerRef},e.droppableProps,{style:{display:"grid",gridTemplateColumns:"minmax(0, 1fr)",gap:"8px",height:"100%",minHeight:"32px"}}),t[n].map((function(e,t){return l.a.createElement(hr,{key:e,id:e,index:t})})),e.placeholder)}))))}function br(e){var t=e.pivotConfig,n=e.onMove;return l.a.createElement(dr.a,{onDragEnd:function(e){var t=e.source,r=e.destination;Object(w.a)(e,["source","destination"]);r&&n({sourceIndex:t.index,destinationIndex:r.index,sourceAxis:t.droppableId,destinationAxis:r.droppableId})}},l.a.createElement(A.a,null,l.a.createElement(R.a,{span:12,style:{minWidth:160}},l.a.createElement(yr,{pivotConfig:t,axis:"x"})),l.a.createElement(R.a,{span:12,style:{minWidth:160}},l.a.createElement(yr,{pivotConfig:t,axis:"y"}))))}var gr=n(163);function vr(e){var t=e.pivotConfig,n=e.onUpdate;return l.a.createElement(gr.a,{checked:t.fillMissingDates,onChange:function(){return n({fillMissingDates:!t.fillMissingDates})}},"Fill Missing Dates")}var jr=n(252);function xr(e){var t=e.id,n=e.index,r=e.order,a=void 0===r?"none":r,i=e.children,o=e.onOrderChange;return l.a.createElement(dr.b,{draggableId:t,index:n},(function(e){var n=e.draggableProps,r=e.dragHandleProps,s=e.innerRef;return l.a.createElement("div",Object.assign({ref:s},n,r,{style:Object(_.a)({display:"flex",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center",marginBottom:8},n.style)}),l.a.createElement(fr.a,null),l.a.createElement(mr.a.Text,{ellipsis:!0,style:{margin:"0 auto 0 8px",padding:"5px 0"}},i),l.a.createElement(jr.a.Group,{onChange:function(e){return o(t,e.target.value)},defaultValue:a,size:"small",style:{marginLeft:"8px"}},l.a.createElement(jr.a.Button,{value:"asc"},"ASC"),l.a.createElement(jr.a.Button,{value:"desc"},"DESC"),l.a.createElement(jr.a.Button,{value:"none"},"NONE")))}))}function Sr(e){var t=e.orderMembers,n=e.onOrderChange,r=e.onReorder;return l.a.createElement(dr.a,{onDragEnd:function(e){var t=e.source,n=e.destination;r(t&&t.index,n&&n.index)}},l.a.createElement(dr.c,{droppableId:"droppable"},(function(e){return l.a.createElement("div",Object.assign({ref:e.innerRef},e.droppableProps),t.map((function(e,t){var r=e.id,a=e.title,i=e.order;return l.a.createElement(xr,{key:r,id:r,index:t,order:i,onOrderChange:n},a)})),e.placeholder)})))}var kr=n(914);function Er(e){var t=e.limit,n=void 0===t?1e4:t,r=e.onUpdate;return l.a.createElement("label",null,"Limit"," ",l.a.createElement(kr.a,{prefix:"Limit",value:n,step:1e3,onChange:function(e){return r({limit:e})}}))}var Or=n(970),Cr=n.n(Or);function _r(e){var t=e.pivotConfig,n=e.orderMembers,r=e.limit,a=e.onMove,i=e.onUpdate,o=e.onReorder,s=e.onOrderChange,c=e.isQueryPresent;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Cr.a,{style:{lineHeight:"32px"}},"Settings:"),l.a.createElement(At,{content:null===t?l.a.createElement(k.a,null):l.a.createElement(l.a.Fragment,null,l.a.createElement(br,{pivotConfig:t,onMove:a}),l.a.createElement(pr.a,{style:{margin:0}}),l.a.createElement("div",{style:{padding:"8px"}},l.a.createElement(vr,{pivotConfig:t,onUpdate:i}))),placement:"bottomLeft",trigger:"click"},l.a.createElement(tt,{disabled:!c,style:{border:0}},"Pivot")),l.a.createElement(At,{content:l.a.createElement("div",{style:{padding:"8px"}},l.a.createElement(Sr,{orderMembers:n,onReorder:o,onOrderChange:s})),placement:"bottomLeft",trigger:"click"},l.a.createElement(tt,{disabled:!c,style:{border:0}},"Order")),l.a.createElement(At,{content:l.a.createElement("div",{style:{padding:"8px"}},l.a.createElement(Er,{limit:r,onUpdate:i})),placement:"bottomLeft",trigger:"click"},l.a.createElement(tt,{disabled:!c,style:{border:0}},"Limit")))}function wr(){var e=Object(M.a)(["\n  display: flex;\n  flex-flow: column;\n  margin-right: 24px;\n  margin-bottom: 16px;\n  \n  > *:first-child {\n    margin-bottom: 8px;\n  }\n"]);return wr=function(){return e},e}var Pr=Je.b.div(wr()),Dr=function(e,t){return Object.keys(e).map((function(n){return{[n]:function(r,a){var i="".concat(n.split("").map((function(e,t){return 0===t?e.toUpperCase():e})).join("")," Member");a&&a.values&&(i="Update Filter Values"),a&&a.dateRange&&(i="Update Date Range"),a&&a.granularity&&(i="Update Granularity"),en(i,{memberName:t});for(var o=arguments.length,s=new Array(o>2?o-2:0),c=2;c<o;c++)s[c-2]=arguments[c];return e[n].apply(null,[r,a].concat(s))}}})).reduce((function(e,t){return Object(_.a)(Object(_.a)({},e),t)}),{})};function Tr(e){var t=e.query,n=e.cubejsApi,r=e.apiUrl,a=e.cubejsToken,i=e.dashboardSource,o=e.setQuery;return l.a.createElement(Ce,{query:t,setQuery:o,cubejsApi:n,wrapWithQueryRenderer:!1,render:function(e){var o=e.resultSet,s=e.error,c=e.isQueryPresent,u=e.chartType,p=e.updateChartType,d=e.measures,m=e.availableMeasures,f=e.updateMeasures,h=e.dimensions,y=e.availableDimensions,b=e.updateDimensions,g=e.segments,v=e.availableSegments,j=e.updateSegments,x=e.filters,S=e.updateFilters,k=e.timeDimensions,E=e.availableTimeDimensions,O=e.updateTimeDimensions,C=e.orderMembers,_=e.updateOrder,w=e.pivotConfig,P=e.updatePivotConfig,D=null;if(o){var T,M=(o.pivotQuery()||o.query()||{}).timeDimensions;D=null===(T=(void 0===M?[]:M)[0])||void 0===T?void 0:T.dateRange}return l.a.createElement(l.a.Fragment,null,l.a.createElement(A.a,{justify:"space-around",align:"top",gutter:24,style:{marginBottom:12}},l.a.createElement(R.a,{span:24},l.a.createElement(mt,{bordered:!1,style:{borderRadius:0}},l.a.createElement(A.a,{justify:"stretch",align:"top",gutter:0,style:{marginBottom:-12}},l.a.createElement(Pr,null,l.a.createElement(rt,null,"Measures"),l.a.createElement(Vn,{members:d,availableMembers:m,addMemberName:"Measure",updateMethods:Dr(f,"Measure")})),l.a.createElement(Pr,null,l.a.createElement(rt,null,"Dimensions"),l.a.createElement(Vn,{members:h,availableMembers:y,addMemberName:"Dimension",updateMethods:Dr(b,"Dimension")})),l.a.createElement(Pr,null,l.a.createElement(rt,null,"Segment"),l.a.createElement(Vn,{members:g,availableMembers:v,addMemberName:"Segment",updateMethods:Dr(j,"Segment")})),l.a.createElement(Pr,null,l.a.createElement(rt,null,"Time"),l.a.createElement(nr,{members:k,availableMembers:E,addMemberName:"Time",updateMethods:Dr(O,"Time"),parsedDateRange:D})),l.a.createElement(Pr,null,l.a.createElement(rt,null,"Filters"),l.a.createElement(Hn,{members:x,availableMembers:y.concat(m),addMemberName:"Filter",updateMethods:Dr(S,"Filter")})))),l.a.createElement(it,{style:{marginTop:16,marginLeft:16}},l.a.createElement(lr,{chartType:u,updateChartType:function(e){en("Change Chart Type"),p(e)}}),l.a.createElement(_r,{isQueryPresent:c,limit:t.limit,pivotConfig:w,orderMembers:C,onReorder:_.reorder,onOrderChange:_.set,onMove:P.moveItem,onUpdate:P.update})))),l.a.createElement(A.a,{justify:"space-around",align:"top",gutter:24,style:{marginRight:0,marginLeft:0}},l.a.createElement(R.a,{span:24,style:{paddingLeft:16,paddingRight:16}},c?l.a.createElement(Ln,{query:t,resultSet:o,error:s,apiUrl:r,cubejsToken:a,chartType:u,cubejsApi:n,dashboardSource:i,pivotConfig:w}):l.a.createElement("h2",{style:{textAlign:"center"}},"Choose a measure or dimension to get started"))))}})}Tr.defaultProps={query:{},setQuery:null,cubejsApi:null,dashboardSource:null,apiUrl:"/cubejs-api/v1",cubejsToken:null};var Mr=function(e){Object(j.a)(r,e);var t,n=Object(x.a)(r);function r(e){var t;return Object(g.a)(this,r),(t=n.call(this,e)).state={},t.dashboardSource=new T,t}return Object(v.a)(r,[{key:"componentDidMount",value:(t=Object(b.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(S.a)("/playground/context");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,this.setState({cubejsToken:n.cubejsToken,apiUrl:n.apiUrl||window.location.href.split("#")[0].replace(/\/$/,"")});case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"cubejsApi",value:function(){var e=this.state,t=e.cubejsToken,n=e.apiUrl;return!this.cubejsApiInstance&&t&&(this.cubejsApiInstance=C()(t,{apiUrl:"".concat(n,"/cubejs-api/v1")})),this.cubejsApiInstance}},{key:"render",value:function(){var e=this.state,t=e.cubejsToken,n=e.apiUrl,r=this.props,a=r.location,i=r.history,o=new URLSearchParams(a.search),s=o.get("query")&&JSON.parse(o.get("query"))||{};return this.cubejsApi()&&l.a.createElement(Tr,{query:s,setQuery:function(e){return i.push("/build?query=".concat(JSON.stringify(e)))},cubejsApi:this.cubejsApi(),apiUrl:n,cubejsToken:t,dashboardSource:this.dashboardSource})||null}}]),r}(u.Component);Mr.defaultProps={};var Ar=Mr,Rr=n(882),qr=n(168),Lr=Rr.a.Content,Br=Rr.a.Sider,Ir=_t.TreeNode,Nr=St.TabPane,Qr={},Fr=function(e){Object(j.a)(o,e);var t,n,r,a,i=Object(x.a)(o);function o(e){var t;return Object(g.a)(this,o),(t=i.call(this,e)).state={expandedKeys:[],autoExpandParent:!0,checkedKeys:[],selectedKeys:[],activeTab:"schema",files:[]},t}return Object(v.a)(o,[{key:"componentDidMount",value:(a=Object(b.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadDBSchema();case 2:return e.next=4,this.loadFiles();case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"onExpand",value:function(e){en("Expand Tables"),this.setState({expandedKeys:e,autoExpandParent:!1})}},{key:"onCheck",value:function(e){en("Check Tables"),this.setState({checkedKeys:e})}},{key:"onSelect",value:function(e){this.setState({selectedKeys:e})}},{key:"cubejsApi",value:function(){var e=this.state,t=e.cubejsToken,n=e.apiUrl;return!this.cubejsApiInstance&&t&&(this.cubejsApiInstance=C()(t,{apiUrl:"".concat(n,"/cubejs-api/v1")})),this.cubejsApiInstance}},{key:"loadDBSchema",value:(r=Object(b.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({schemaLoading:!0}),e.prev=1,e.next=4,P("/playground/db-schema");case 4:return t=e.sent,e.next=7,t.json();case 7:n=e.sent,this.setState({tablesSchema:n.tablesSchema}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),this.setState({schemaLoadingError:e.t0});case 14:return e.prev=14,this.setState({schemaLoading:!1}),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))),function(){return r.apply(this,arguments)})},{key:"loadFiles",value:(n=Object(b.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("/playground/files");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,this.setState({files:n.files});case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"generateSchema",value:(t=Object(b.a)(y.a.mark((function e(){var t,n,r,a,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.checkedKeys,r=t.tablesSchema,a=this.props.history,en("Generate Schema"),e.next=5,P("/playground/generate-schema",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tables:n.filter((function(e){return!!Qr[e]})).map((function(e){return Qr[e]})),tablesSchema:r})});case 5:if(200!==(i=e.sent).status){e.next=14;break}return en("Generate Schema Success"),e.next=10,this.loadFiles();case 10:this.setState({checkedKeys:[],activeTab:"files"}),He.a.success({title:"Schema files successfully generated!",content:"You can start building the charts",okText:"Build",cancelText:"Close",okCancel:!0,onOk(){a.push("/build")}}),e.next=20;break;case 14:return e.t0=en,e.next=17,i.text();case 17:e.t1=e.sent,e.t2={error:e.t1},(0,e.t0)("Generate Schema Fail",e.t2);case 20:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"selectedFileContent",value:function(){var e=this.selectedFile();return e&&e.content}},{key:"selectedFile",value:function(){var e=this.state,t=e.files,n=e.selectedFile;return t.find((function(e){return e.fileName===n}))}},{key:"renderFilesMenu",value:function(){var e=this,t=this.state,n=t.selectedFile,r=t.files;return l.a.createElement(bt,{mode:"inline",onClick:function(t){var n=t.key;en("Select File"),e.setState({selectedFile:n})},selectedKeys:n?[n]:[]},r.map((function(e){return l.a.createElement(bt.Item,{key:e.fileName},e.fileName)})))}},{key:"render",value:function(){var e=this,t=this.state,n=t.schemaLoading,r=t.schemaLoadingError,a=t.tablesSchema,i=t.selectedFile,o=t.expandedKeys,s=t.autoExpandParent,c=t.checkedKeys,u=t.selectedKeys,p=t.activeTab,d=function e(t){return t.map((function(t){return t.treeData?l.a.createElement(Ir,{title:t.title,key:t.key,dataRef:t},e(t.treeData)):l.a.createElement(Ir,t)}))},m=function(){return Object.keys(a||{}).length>0?l.a.createElement(_t,{checkable:!0,onExpand:e.onExpand.bind(e),expandedKeys:o,autoExpandParent:s,onCheck:e.onCheck.bind(e),checkedKeys:c,onSelect:e.onSelect.bind(e),selectedKeys:u},d((t=a||{},Object.keys(t).map((function(e){return{title:e,key:e,treeData:Object.keys(t[e]).map((function(t){var n="".concat(e,".").concat(t);return Qr[n]=[e,t],{title:t,key:n}}))}}))))):l.a.createElement(Dt,{message:"Empty DB Schema",description:"Please check connection settings",type:"warning"});var t};return l.a.createElement(Rr.a,{style:{height:"100%"}},l.a.createElement(Br,{width:320,className:"schema-sidebar"},l.a.createElement(St,{activeKey:p,onChange:function(t){return e.setState({activeTab:t})},tabBarExtraContent:l.a.createElement($e.a,{disabled:!c.length,type:"primary",onClick:function(){return e.generateSchema()}},"Generate Schema")},l.a.createElement(Nr,{tab:"Tables",key:"schema"},n?l.a.createElement(k.a,{style:{width:"100%"}}):r?l.a.createElement(Dt,{message:"Error while loading DB schema",description:r.toString(),type:"error"}):m()),l.a.createElement(Nr,{tab:"Files",key:"files"},this.renderFilesMenu()))),l.a.createElement(Lr,{style:{minHeight:280,padding:24}},i&&l.a.createElement(Dt,{message:l.a.createElement("span",null,"This file can be edited atÂ ",l.a.createElement("b",null,this.selectedFile().absPath)),type:"info",style:{paddingTop:10,paddingBottom:11}}),i?l.a.createElement(Qt,{code:this.selectedFileContent(),style:{padding:0,marginTop:24}}):l.a.createElement(qr.a,{style:{marginTop:50},description:"Select tables to generate Cube.js schema"})))}}]),o}(u.Component),Gr=(n(421),n(133)),zr=function(e){var t=e.children;return l.a.createElement("div",{style:{textAlign:"center",marginTop:50}},t)},Vr=function(){return l.a.createElement("p",{style:{width:450,margin:"20px auto"}},"Dashboard App is a convenient way to setup and deploy frontend app to work with Cube.js backend. You can learn more about in the"," ",l.a.createElement("a",{href:"https://cube.dev/docs/dashboard-app",target:"_blankl"},"Cube.js docs"),".")},Ur=function(e){Object(j.a)(i,e);var t,n,r,a=Object(x.a)(i);function i(e){var t;return Object(g.a)(this,i),(t=a.call(this,e)).state={},t}return Object(v.a)(i,[{key:"componentDidMount",value:(r=Object(b.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dashboardSource=new T,e.next=3,this.loadDashboard();case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"loadDashboard",value:(n=Object(b.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({appCode:null,loadError:null}),e.prev=1,e.next=4,this.dashboardSource.load();case 4:return this.setState({dashboardStarting:!1,appCode:!this.dashboardSource.loadError&&this.dashboardSource.dashboardCreated,loadError:this.dashboardSource.loadError}),e.next=7,P("/playground/dashboard-app-status");case 7:return e.next=9,e.sent.json();case 9:t=e.sent,this.setState({dashboardRunning:t.running,dashboardPort:t.dashboardPort,dashboardAppPath:t.dashboardAppPath}),e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(1),this.setState({dashboardStarting:!1,loadError:l.a.createElement("pre",null,e.t0.toString())}),e.t0;case 17:case"end":return e.stop()}}),e,this,[[1,13]])}))),function(){return n.apply(this,arguments)})},{key:"startDashboardApp",value:(t=Object(b.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({dashboardStarting:!0}),e.next=3,P("/playground/start-dashboard-app");case 3:return e.next=5,this.loadDashboard();case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,n=t.appCode,r=t.dashboardPort,a=t.loadError,i=t.dashboardRunning,o=t.dashboardStarting,s=t.dashboardAppPath;if(a&&"string"==typeof a&&-1!==a.indexOf("Dashboard app not found"))return l.a.createElement(m.a,{to:"/template-gallery"});if(a)return l.a.createElement(zr,null,l.a.createElement("h2",null,a),l.a.createElement("p",{style:{marginTop:25}},l.a.createElement(Gr.a,{to:"/template-gallery"},l.a.createElement($e.a,{type:"primary"},"Create dashboard app in your project directory"))),l.a.createElement(Vr,null));if(!n)return l.a.createElement(zr,null,l.a.createElement("h2",null,"Â Creating Dashboard App"),l.a.createElement("div",null,l.a.createElement(k.a,{tip:"It may take several minutes. Please check console for progress..."})),l.a.createElement(Vr,null));if(!i)return l.a.createElement(zr,null,l.a.createElement("h2",null,"Dashboard App is not running"),l.a.createElement("h3",null,"Please start dashboard app or run it manually using",l.a.createElement("code",{className:"inline-code"},"$ npm run start"),l.a.createElement("br",null),"inÂ ",l.a.createElement("b",null,s),"Â directory."),l.a.createElement("p",{style:{marginTop:25}},l.a.createElement($e.a,{type:"primary",size:"large",loading:o,onClick:function(){return e.startDashboardApp(!0)}},o?"Dashboard app is starting. It may take a while. Please check console for progress...":"Start dashboard app")),l.a.createElement(Vr,null));var c="http://".concat(window.location.hostname,":").concat(r);return l.a.createElement("div",{style:{height:"100%",width:"100%",padding:"15px 30px 30px 30px",background:"#fff"}},l.a.createElement(Be.a,{message:l.a.createElement("span",null,"This dashboard app can be edited atÂ ",l.a.createElement("b",null,s),". Dev server is running atÂ ",l.a.createElement("a",{href:c,target:"_blank",rel:"noopener noreferrer"},c),". Learn more how to customize and deploy it atÂ ",l.a.createElement("a",{href:"https://cube.dev/docs/dashboard-app"},"Cube.jsÂ docs"),".Â ",l.a.createElement("a",{onClick:function(){return window.location.reload()},style:{cursor:"pointer"}},"Refresh page"),"Â if it is empty."),type:"info",closable:!0,style:{marginBottom:15}}),l.a.createElement("iframe",{src:c,style:{width:"100%",height:"100%",border:0,borderRadius:4,overflow:"hidden"},sandbox:"allow-modals allow-forms allow-popups allow-scripts allow-same-origin",title:"Dashboard"}))}}]),i}(u.Component),Yr=Object(m.f)(Ur),Kr=(n(2215),n(2216),n(2317)),Hr=n(2318),Wr=n(2319),Jr=n(644);function $r(){var e=Object(M.a)(["\n  &&& {\n    float: right;\n    height: 32px;\n    margin: 8px ",";\n    border: 1px solid rgba(255, 255, 255, 0.35);\n    border-radius: 4px;\n    display: flex;\n    align-items: center;\n    color: white;\n    transition: all 0.25s ease;\n    padding: 0 10px;\n  \n    span {\n      font-size: 14px;\n      margin-right: 10px;\n    }\n  \n    &:hover {\n      border-color: white;\n      color: white;\n    }\n  }\n"]);return $r=function(){return e},e}function Xr(){var e=Object(M.a)(["\n  &&& {\n    font-size: 15px;\n    font-weight: 500;\n    line-height: 48px;\n    height: 49px;\n    & > a {\n      &, &:hover {\n        opacity: 0.6;\n        color: white;\n      }\n    }\n    &.ant-menu-item-selected,\n    &.ant-menu-item-active {\n      color: white;\n      border-bottom: 2px solid white;\n      \n      &:hover {\n        border-bottom: 2px solid white;      \n      }\n    \n      a {\n        opacity: 1;\n        color: white;\n      }\n    }\n  \n    &:not(.ant-menu-item-selected) {\n      &.ant-menu-item-active,\n      &:hover {\n        color: white;\n        border-bottom: 2px solid white;\n      }\n    }\n  }\n"]);return Xr=function(){return e},e}function Zr(){var e=Object(M.a)(["\n  && {\n    background: transparent;\n    border-bottom: 0;\n  }\n"]);return Zr=function(){return e},e}function ea(){var e=Object(M.a)(["\n  && {\n    background-color: var(--dark-02-color);\n    color: white;\n    padding: 0 16px; \n    line-height: 44px; \n    height: 48px;\n  }\n"]);return ea=function(){return e},e}var ta=Object(Je.b)(Rr.a.Header)(ea()),na=Object(Je.b)(Ye.a)(Zr()),ra=Object(Je.b)(Ye.a.Item)(Xr()),aa=Je.b.a($r(),(function(e){return e.noMargin?"0":"8px"})),ia=function(e){var t=e.selectedKeys,n=Object(Jr.useMediaQuery)({query:"(min-device-width: 992px)"}),r=Object(Jr.useMediaQuery)({query:"(max-device-width: 991px)"});return l.a.createElement(ta,null,l.a.createElement("div",{style:{float:"left"}},l.a.createElement("img",{src:"./cubejs-playground-logo.svg",style:{height:28,marginRight:28},alt:""})),n&&l.a.createElement(na,{theme:"light",mode:"horizontal",selectedKeys:t},l.a.createElement(ra,{key:"/build"},l.a.createElement(Gr.a,{to:"/build"},"Build")),l.a.createElement(ra,{key:"/dashboard"},l.a.createElement(Gr.a,{to:"/dashboard"},"Dashboard App")),l.a.createElement(ra,{key:"/schema"},l.a.createElement(Gr.a,{to:"/schema"},"Schema")),l.a.createElement(aa,{noMargin:!0,key:"slack",href:"https://slack.cube.dev",target:"_blank"},l.a.createElement(Kr.a,null),"Slack"),l.a.createElement(aa,{key:"docs",href:"https://cube.dev/docs",target:"_blank"},l.a.createElement(Hr.a,null),"Docs")),r&&l.a.createElement("div",{style:{float:"right"}},l.a.createElement(Ke.a,{overlay:l.a.createElement(Ye.a,null,l.a.createElement(Ye.a.Item,{key:"/build"},l.a.createElement(Gr.a,{to:"/build"},"Build")),l.a.createElement(Ye.a.Item,{key:"/dashboard"},l.a.createElement(Gr.a,{to:"/dashboard"},"Dashboard App")),l.a.createElement(Ye.a.Item,{key:"/schema"},l.a.createElement(Gr.a,{to:"/schema"},"Schema")))},l.a.createElement(Wr.a,null))))},oa=n(645),sa=n.n(oa);function ca(){var e=Object(M.a)(["\n  body {\n    ",'\n  }\n\n  .inline-code {\n    margin: 0 1px;\n    padding: 0.2em 0.4em;\n    font-size: 0.9em;\n    background: #f2f4f5;\n    border: 1px solid #eee;\n    border-radius: 3px;\n  }\n  \n  .ant-dropdown-menu::-webkit-scrollbar-track {\n    background: var(--light-color);\n  }\n  \n  .ant-dropdown-menu::-webkit-scrollbar-thumb {\n    border-radius: 4px;\n    background: var(--dark-03-color);\n  }\n  \n  .ant-dropdown-menu::-webkit-scrollbar {\n    width: 8px;\n    height: 8px;\n  } \n  \n  .schema-sidebar .ant-tabs-top-bar {\n    padding: 0 16px;\n  }\n  \n  .schema-sidebar .ant-menu {\n    border: 0;\n  }\n  \n  .ant-layout-header .ant-menu {\n    height: 100%;\n  }\n  \n  .ant-menu-horizontal .ant-menu-item {\n    top: 0;\n    height: 100%;\n  }\n  \n  .ant-select-item.ant-select-item-option-selected:not(.ant-select-item-option-disabled) {\n    color: white;\n  }\n  \n  .ant-popover .ant-popover-inner-content {\n    padding: 0;\n  }\n  \n  \n  code[class*="language-"],\n  pre[class*="language-"] {\n    color: var(--dark-01-color);\n    background: none;\n    /*text-shadow: 0 1px white;*/\n    font-family: "Roboto Mono", Monaco, \'Andale Mono\', \'Ubuntu Mono\', monospace;\n    text-align: left;\n    font-weight: normal;\n    font-size: 14px;\n    line-height: 20px;\n    white-space: pre;\n    word-spacing: normal;\n    word-break: normal;\n    word-wrap: normal;\n    border-radius: 4px;\n    border: none;\n  \n    -moz-tab-size: 4;\n    -o-tab-size: 4;\n    tab-size: 4;\n  \n    -webkit-hyphens: none;\n    -moz-hyphens: none;\n    -ms-hyphens: none;\n    hyphens: none;\n  }\n  \n  pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,\n  code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {\n    text-shadow: none;\n    /*background: #b3d4fc;*/\n  }\n  \n  pre[class*="language-"]::selection, pre[class*="language-"] ::selection,\n  code[class*="language-"]::selection, code[class*="language-"] ::selection {\n    text-shadow: none;\n    /*background: #b3d4fc;*/\n  }\n  \n  @media print {\n    code[class*="language-"],\n    pre[class*="language-"] {\n      text-shadow: none;\n    }\n  }\n  \n  /* Code blocks */\n  pre[class*="language-"] {\n    padding: 1em;\n    overflow: auto;\n  }\n  \n  :not(pre) > code[class*="language-"],\n  pre[class*="language-"] {\n    background: transparent;\n  }\n  \n  /* Inline code */\n  :not(pre) > code[class*="language-"] {\n    padding: .1em;\n    border-radius: .3em;\n    white-space: normal;\n  }\n  \n  .token.comment,\n  .token.prolog,\n  .token.doctype,\n  .token.cdata {\n    color: var(--dark-03-color);\n  }\n  \n  .token.punctuation {\n    color: var(--dark-03-color);\n  }\n  \n  .namespace {\n    opacity: .7;\n  }\n  \n  .token.property,\n  .token.tag,\n  .token.boolean,\n  .token.number,\n  .token.constant,\n  .token.symbol,\n  .token.deleted {\n    color: var(--pink-color);\n  }\n  \n  .token.selector,\n  .token.attr-name,\n  .token.string,\n  .token.char,\n  .token.builtin,\n  .token.inserted {\n    color: var(--purple-color);\n  }\n  \n  .token.operator,\n  .token.entity,\n  .token.url,\n  .language-css .token.string,\n  .style .token.string {\n    color: var(--dark-01-color);\n  }\n  \n  .token.atrule,\n  .token.attr-value,\n  .token.keyword {\n    color: var(--dark-01-color);\n  }\n  \n  .token.atrule,\n  .token.keyword {\n    font-weight: 500;\n  }\n  \n  .token.function,\n  .token.class-name {\n    color: var(--pink-color);\n  }\n  \n  .token.regex,\n  .token.important,\n  .token.variable {\n    color: var(--pink-color);\n  }\n  \n  .token.important,\n  .token.bold {\n    font-weight: bold;\n  }\n  \n  .token.italic {\n    font-style: italic;\n  }\n  \n  .token.entity {\n    cursor: help;\n  }\n']);return ca=function(){return e},e}var ua={};Object.keys(sa.a).forEach((function(e){ua["--".concat(e)]=sa.a[e]}));var la=Object(Je.a)(ca(),Object.entries(ua).map((function(e){var t=Object(De.a)(e,2),n=t[0],r=t[1];return"".concat(n,": ").concat(r,";")})).join("\n    ")),pa=function(e){Object(j.a)(r,e);var t,n=Object(x.a)(r);function r(){return Object(g.a)(this,r),n.apply(this,arguments)}return Object(v.a)(r,[{key:"componentDidMount",value:(t=Object(b.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.addEventListener("unhandledrejection",(function(e){var t=e.reason;console.log(t);var n=(t.stack||t).toString();Zt("Playground Error",{error:n}),We.a.error({message:l.a.createElement("span",null,l.a.createElement("b",null,"Error"),"Â ðŸ˜¢",l.a.createElement("div",null,"Ask about it inÂ ",l.a.createElement("a",{href:"https://slack.cube.dev",target:"_blank",rel:"noopener noreferrer"},"Slack"),". These guys know how to fix this for sure!")),description:n})})),e.next=3,Object(S.a)("/playground/context");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,r=n.anonymousId,a={coreServerVersion:n.coreServerVersion,projectFingerprint:n.projectFingerprint},$t=a,Xt(Object(_.a)({event:"identify",anonymousId:r},a));case 8:case"end":return e.stop()}var r,a}),e)}))),function(){return t.apply(this,arguments)})},{key:"componentDidCatch",value:function(e,t){Zt("Playground Error",{error:(e.stack||e).toString(),info:t.toString()})}},{key:"render",value:function(){var e,t=(this.state||{}).fatalError,n=this.props,r=n.location,a=n.children;return l.a.createElement(Rr.a,{style:{height:"100%"}},l.a.createElement(la,null),l.a.createElement(ia,{selectedKeys:(e=r.pathname,"/template-gallery"===e?["/dashboard"]:[e])}),l.a.createElement(Rr.a.Content,{style:{height:"100%"}},t?l.a.createElement(Be.a,{message:"Error occured while rendering",description:t.stack,type:"error"}):a))}}],[{key:"getDerivedStateFromError",value:function(e){return{fatalError:e}}}]),r}(u.Component);pa.defaultProps={children:[]};var da=Object(m.f)(pa);function ma(){return(ma=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function fa(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ha=l.a.createElement("path",{d:"M47 92V2",stroke:"#43436B",strokeWidth:3,strokeLinecap:"round"}),ya=l.a.createElement("path",{d:"M92 47L2 47",stroke:"#43436B",strokeWidth:3,strokeLinecap:"round"}),ba=function(e){var t=e.svgRef,n=e.title,r=fa(e,["svgRef","title"]);return l.a.createElement("svg",ma({width:94,height:94,viewBox:"0 0 94 94",fill:"none",ref:t},r),n?l.a.createElement("title",null,n):null,ha,ya)},ga=l.a.forwardRef((function(e,t){return l.a.createElement(ba,ma({svgRef:t},e))})),va=(n.p,n(2320)),ja=n(2295),xa=n(915);function Sa(){var e=Object(M.a)(["\n  && {\n    &:not(:last-child) {\n      margin-bottom: 16px;\n    }\n    \n    &:last-child {\n      margin-bottom: 0;\n    }\n  }\n"]);return Sa=function(){return e},e}function ka(){var e=Object(M.a)(["\n  && {\n    .ant-form-item-label {\n      line-height: 16px;\n      margin-bottom: 7px;\n      label {\n        font-weight: 500;\n        font-size: 12px;\n        line-height: 16px;\n      }\n    }\n\n    .ant-dropdown-trigger {\n      padding: 5px 12px;\n    }\n  }\n"]);return ka=function(){return e},e}function Ea(){var e=Object(M.a)(["\n  && {\n    .ant-modal-header {\n      border-bottom: none;\n      padding: 40px 32px 0 32px;\n\n      .ant-modal-title {\n        font-size: 20px;\n      }\n    }\n\n    .ant-modal-footer {\n      border-top: none;\n      padding: 0 32px 34px 32px;\n      text-align: left;\n    }\n  }\n"]);return Ea=function(){return e},e}var Oa=Object(Je.b)(He.a)(Ea()),Ca=Object(Je.b)(ja.a)(ka()),_a=Object(Je.b)(ja.a.Item)(Sa()),wa=function(){return l.a.createElement(va.a,{style:{color:"#727290"}})},Pa=function(e){var t=e.visible,n=e.onOk,r=e.onCancel,a=e.onChange,i=e.chartLibraries,o=e.currentLibraryItem,s=e.frameworks,c=e.framework,u=e.frameworkItem,p=e.templatePackages,d=e.templatePackage,m=e.enableWebSocketTransport,f=l.a.createElement(Ye.a,{onClick:function(e){en("Set Chart Library",{chartLibrary:e.key}),a("chartLibrary",e.key)}},i.map((function(e){return l.a.createElement(Ye.a.Item,{key:e.value},e.title)}))),h=l.a.createElement(Ye.a,{onClick:function(e){en("Set Framework",{framework:e.key}),a("framework",e.key)}},s.map((function(e){return l.a.createElement(Ye.a.Item,{key:e.id},e.title)}))),y=l.a.createElement(Ye.a,{onClick:function(e){en("Set Template Package",{templatePackageName:e.key}),a("templatePackageName",e.key)}},(p||[]).map((function(e){return l.a.createElement(Ye.a.Item,{key:e.name},e.description)})));return l.a.createElement(Oa,{title:"Create your own Dashboard App",visible:t,onOk:n,onCancel:r,footer:[l.a.createElement(tt,{key:"submit",type:"primary",onClick:n},"Ok"),l.a.createElement(tt,{key:"back",onClick:r},"Cancel")]},l.a.createElement(Ca,null,l.a.createElement(_a,{label:"Framework"},l.a.createElement(Ke.a,{overlay:h},l.a.createElement(tt,null,u&&u.title,l.a.createElement(wa,null)))),!(null==u?void 0:u.scaffoldingSupported)&&l.a.createElement(Be.a,{style:{marginBottom:23},type:"info",message:l.a.createElement("span",null,"We do not supportÂ ",u.title,"Â dashboard scaffolding generation yet. Please refer toÂ ",l.a.createElement("a",{href:u.docsLink,target:"_blank",rel:"noopener noreferrer",onClick:function(){return en("Unsupported Dashboard Framework Docs",{framework:c})}},u.title,"Â docs"),"Â to see on how to use it with Cube.js.")}),l.a.createElement(_a,{label:"Main Template"},l.a.createElement(Ke.a,{overlay:y,disabled:!u.scaffoldingSupported},l.a.createElement(tt,null,d&&d.description,l.a.createElement(wa,null)))),l.a.createElement(_a,{label:"Charting Library"},l.a.createElement(Ke.a,{overlay:f,disabled:!u.scaffoldingSupported},l.a.createElement(tt,null,o&&o.title,l.a.createElement(wa,null)))),l.a.createElement(_a,{label:"Web Socket Transport (Real-time)"},l.a.createElement(xa.a,{disabled:"angular"===c.toLowerCase(),checked:m,onChange:function(e){return a("enableWebSocketTransport",e)}}))))};function Da(){var e=Object(M.a)(["\n  display: block;\n  font-size: 16px;\n  margin-bottom: 24px;\n"]);return Da=function(){return e},e}function Ta(){var e=Object(M.a)(["\n  && {\n    border: none;\n    border-radius: 8px;\n    margin-bottom: 24px;\n    padding: 16px;\n    ","\n\n    &:hover {\n      padding: 16px;\n      ","\n    }\n\n    button {\n      display: none;\n      position: absolute;\n      margin-left: -64px;\n      top: 80px;\n      left: 50%;\n    }\n\n    svg path {\n      transition: stroke 0.25s ease;\n    }\n\n    && .ant-card-cover {\n      height: 168px;\n      border-radius: 8px 8px 0 0;\n      background: ",";\n      display: flex;\n      align-items: center;\n      position: relative;\n      margin: -16px -16px 0 -16px;\n      padding: 24px 24px 0 24px;\n\n      &::after {\n        content: '';\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        top: 0;\n        left: 0;\n        background: rgba(81, 87, 125, 0.3);\n        opacity: 0;\n        transition: all 0.25s;\n        border-radius: 8px 8px 0 0;\n      }\n\n      div {\n        //box-shadow: 0 -1px 6px rgba(20, 20, 70, .06);\n        background-position: top;\n        border-radius: 4px 4px 0 0;\n      }\n    }\n\n    &&.ant-card-hoverable:hover {\n      box-shadow: 0px 15px 20px rgba(67, 67, 107, 0.1);\n      button {\n        display: block;\n      }\n      &:hover .ant-card-cover:after {\n        opacity: ",";\n      }\n    }\n\n    svg path {\n      stroke: var(--primary-color);\n    }\n\n    && .ant-card-body {\n      min-height: 175px;\n      display: flex;\n      place-items: stretch;\n      place-content: start stretch;\n      text-align: left;\n      z-index: 1;\n      padding: 24px 0 16px;\n    }\n\n    && .ant-card-meta {\n      text-align: left;\n    }\n\n    && .ant-card-meta-title {\n      white-space: unset;\n      color: ",";\n      text-align: ",";\n      margin-bottom: 16px;\n    }\n\n    && .ant-card-meta-description {\n      color: ",";\n      opacity: ",";\n      font-size: 13px;\n      text-align: ",";\n      ","\n    }\n  }\n"]);return Ta=function(){return e},e}function Ma(){var e=Object(M.a)(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n  margin: auto;\n  max-width: 1024px;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: ",";\n"]);return Ma=function(){return e},e}var Aa=function(e){var t=e.children;return l.a.createElement("div",{style:{margin:25}},t)},Ra=Je.b.div(Ma(),(function(e){return'url("'.concat(e.src,'")')})),qa=Object(Je.b)(mt)(Ta(),(function(e){return e.createYourOwn?"\n      background: transparent;\n      border: 1px solid var(--purple-03-color);\n    ":""}),(function(e){return e.createYourOwn?"\n        border: 1px solid var(--purple-03-color);\n      ":"border: none;"}),(function(e){return e.createYourOwn?"transparent":"#DEDEF1"}),(function(e){return e.createYourOwn?"0":"1"}),(function(e){return e.createYourOwn?"var(--primary-color)":"var(--text-color)"}),(function(e){return e.createYourOwn?"center":"left"}),(function(e){return e.createYourOwn?"var(--primary-color)":"var(--dark-03-color)"}),(function(e){return e.createYourOwn?"0.8":1}),(function(e){return e.createYourOwn?"center":"left"}),(function(e){return e.createYourOwn?"padding: 0 32px;":""})),La=Object(Je.b)(mr.a.Text)(Da()),Ba=function(e){Object(j.a)(r,e);var t,n=Object(x.a)(r);function r(e){var t;return Object(g.a)(this,r),(t=n.call(this,e)).state={chartLibrary:Rn[0].value,framework:"react",templatePackageName:"react-antd-dynamic",templates:null},t}return Object(v.a)(r,[{key:"componentDidMount",value:(t=Object(b.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dashboardSource=new T,e.next=3,this.dashboardSource.load(!0);case 3:return e.t0=this,e.t1=this.dashboardSource.loadError,e.next=7,this.dashboardSource.templates();case 7:e.t2=e.sent,e.t3={loadError:e.t1,templates:e.t2},e.t0.setState.call(e.t0,e.t3);case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e,t=this,n=this.state,r=n.loadError,a=n.templates;if(r&&-1===r.indexOf("Dashboard app not found"))return l.a.createElement(m.a,{to:"/dashboard"});if(null==a)return l.a.createElement(k.a,null);var i=this.state,o=i.chartLibrary,s=i.framework,c=i.templatePackageName,u=i.createOwnModalVisible,p=i.enableWebSocketTransport,d=this.props.history,f=Rn.find((function(e){return e.value===o})),h=rn.find((function(e){return e.id===s})),g=null===(e=this.dashboardSource)||void 0===e?void 0:e.templatePackages(s).find((function(e){return e.name===c})),v=a.map((function(e){var n=e.name,r=e.description,a=e.coverUrl;return l.a.createElement(R.a,{xs:{span:24},md:{span:12},lg:{span:8},xl:{span:6},style:{display:"flex"},key:n},l.a.createElement(qa,{hoverable:!0,bordered:!1,cover:l.a.createElement(Ra,{src:a})},l.a.createElement(mt.Meta,{title:n,description:r}),l.a.createElement(tt,{type:"primary",onClick:Object(b.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.dashboardSource.applyTemplatePackages(n);case 2:d.push("/dashboard");case 3:case"end":return e.stop()}}),e)})))},"Create App")))})).concat([l.a.createElement(R.a,{xs:{span:24},md:{span:12},lg:{span:8},xl:{span:6},style:{display:"flex"},key:"own"},l.a.createElement(qa,{onClick:function(){return t.setState({createOwnModalVisible:!0})},hoverable:!0,createYourOwn:!0,bordered:!1,cover:l.a.createElement(ga,null)},l.a.createElement(mt.Meta,{title:"Create your Own",description:"Mix different templates together to create your own dashboard application"})),l.a.createElement(Pa,{visible:u,onOk:Object(b.a)(y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],t.setState({createOwnModalVisible:!1}),n="react"===s.toLowerCase()?["create-react-app",c,"".concat(o,"-charts"),"".concat(c.match(/^react-(\w+)/)[1],"-tables"),"react-credentials"].concat(p?["react-web-socket-transport"]:[]):["create-ng-app",c,"".concat(o,"-charts"),"ng-credentials"],e.next=5,t.dashboardSource.applyTemplatePackages(n);case 5:d.push("/dashboard");case 6:case"end":return e.stop()}}),e)}))),onCancel:function(){return t.setState({createOwnModalVisible:!1})},onChange:function(e,n){"framework"===e&&s!==n&&t.setState({templatePackageName:"ng-material-dynamic",chartLibrary:"angular"===n.toLowerCase()?"ng2":Rn[0].value}),t.setState({[e]:n})},chartLibraries:"angular"===s.toLowerCase()?[{title:"ng2-charts",value:"ng2"}]:Rn.filter((function(e){return"ng2"!==e.value})),currentLibraryItem:f,frameworks:rn,framework:s,frameworkItem:h,templatePackages:this.dashboardSource&&this.dashboardSource.templatePackages(s),templatePackage:g,enableWebSocketTransport:p&&"angular"!==s.toLowerCase()}))]);return l.a.createElement(Aa,null,l.a.createElement(La,null,"Build your app from one the popular templates below or"," ",l.a.createElement("a",{onClick:function(){return t.setState({createOwnModalVisible:!0})}},"create your own")),l.a.createElement(A.a,{gutter:24},v))}}]),r}(u.Component),Ia=Object(m.f)(Ba),Na=Object(f.b)();Na.listen((function(e){var t;t=e,Xt(Object(_.a)({event:"page"},t))})),d.a.render(l.a.createElement(m.c,{history:Na},l.a.createElement(da,null,l.a.createElement(m.b,{key:"index",exact:!0,path:"/",component:E}),l.a.createElement(m.b,{key:"build",path:"/build",component:Ar}),l.a.createElement(m.b,{key:"schema",path:"/schema",component:Fr}),l.a.createElement(m.b,{key:"dashboard",path:"/dashboard",component:Yr}),l.a.createElement(m.b,{key:"template-gallery",path:"/template-gallery",component:Ia}))),document.getElementById("root"))},645:function(e,t){var n={pink:"255, 100, 146",purple:"122, 119, 255","purple-03":"175, 173, 255","purple-04":"202, 201, 255",text:"91, 92, 125","dark-01":"20, 20, 70","dark-02":"67, 67, 107","dark-03":"161, 161, 181","dark-05":"213, 213, 226",light:"243, 243, 251"};function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return"rgba(".concat(n[e],", ").concat(t,")")}e.exports={"active-bg":r("purple",.1),"primary-bg":r("purple",.1),"primary-1":r("purple",.9),"primary-2":r("purple",.8),"primary-3":r("purple",.7),"primary-4":r("purple",.6),"primary-5":r("purple",.5),"primary-6":r("purple",.4),"primary-7":r("purple",.3),"primary-8":r("purple",.2),"primary-9":r("purple",.1),"primary-10":r("purple",0),"light-5":r("light",.5),"remove-btn-bg":r("purple",.1),"remove-btn-hover-bg":r("purple",.2),"primary-color":r("purple"),"heading-color":r("dark",.65),"link-color":r("purple"),"info-color":r("purple"),"layout-body-background":"#f3f3fc","layout-header-background":"#eeeef5","menu-highlight-color":r("dark-01"),"item-hover-bg":r("light"),"layout-header-height":"48px","font-family":"'DM Sans', sans-serif","menu-item-font-size":"15px","btn-primary-shadow":"none","btn-text-shadow":"none","modal-body-padding":"32px","form-item-margin-bottom":"23px","disabled-color":r("dark-03"),"disabled-bg":r("dark-05",.2),"menu-item-active-bg":r("light"),"font-size-base":"14px","border-radius-base":"4px","padding-lg":"16px"},Object.keys(n).forEach((function(t){e.exports["".concat(t,"-color")]=r(t)}))},981:function(e,t,n){e.exports=n(2289)}});