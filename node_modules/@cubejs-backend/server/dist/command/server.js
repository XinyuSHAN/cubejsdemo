"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Server = void 0;
const command_1 = require("@oclif/command");
const shared_1 = require("@cubejs-backend/shared");
const container_1 = require("../server/container");
class Server extends command_1.Command {
    async run() {
        const options = this.parse(Server);
        process.env.NODE_ENV = 'production';
        const devMode = shared_1.getEnv('devMode');
        if (devMode) {
            process.env.NODE_ENV = 'development';
        }
        const container = new container_1.ServerContainer({
            debug: options.flags.debug,
        });
        await container.runProjectDiagnostics();
        const configuration = await container.lookupConfiguration();
        container.runServerInstance(configuration);
    }
}
exports.Server = Server;
Server.description = 'Run server in Production mode';
Server.flags = {
    debug: command_1.flags.boolean({
        default: false,
        description: 'Print useful debug information'
    })
};
Server.args = [];
exports.default = Server;
//# sourceMappingURL=server.js.map